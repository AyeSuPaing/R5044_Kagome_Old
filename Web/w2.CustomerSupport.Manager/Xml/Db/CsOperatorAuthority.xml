<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : CSオペレータ権限系SQLステートメントXML(CsOperatorAuthority.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2013 All Rights Reserved.
=========================================================================================================
-->
<CsOperatorAuthority>

  <!-- 取得 -->
  <Get>
  <Statement>
    <![CDATA[
        SELECT  w2_CsOperatorAuthority.*
          FROM  w2_CsOperatorAuthority
         WHERE  w2_CsOperatorAuthority.dept_id = @dept_id
           AND  w2_CsOperatorAuthority.operator_authority_id = @operator_authority_id
      ]]>
  </Statement>
  <Parameter>
    <Input Name="dept_id" Type="nvarchar" Size="30" />
    <Input Name="operator_authority_id" Type="nvarchar" Size="10" />
  </Parameter>
  </Get>

  <!-- 全件取得 -->
  <GetAll>
    <Statement>
      <![CDATA[
        SELECT  w2_CsOperatorAuthority.*
          FROM  w2_CsOperatorAuthority
         WHERE  w2_CsOperatorAuthority.dept_id = @dept_id
      ORDER BY  w2_CsOperatorAuthority.operator_authority_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
    </Parameter>
  </GetAll>

  <!-- 登録 -->
  <Register>
    <Statement>
      <![CDATA[
        INSERT  w2_CsOperatorAuthority
             (  
                dept_id,
                operator_authority_id,
                operator_authority_name,
                permit_mail_send_flg,
                permit_approval_flg,
                permit_edit_flg,
                permit_unlock_flg,
                permit_edit_signature_flg,
                receive_no_assign_warning_flg,
                date_created,
                date_changed,
                last_changed,
                permit_permanent_delete_flg
              )
              VALUES
              (
                @dept_id,
                @operator_authority_id,
                @operator_authority_name,
                @permit_mail_send_flg,
                @permit_approval_flg,
                @permit_edit_flg,
                @permit_unlock_flg,
                @permit_edit_signature_flg,
                @receive_no_assign_warning_flg,
                getdate(),
                getdate(),
                @last_changed,
                @permit_permanent_delete_flg
              )
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="operator_authority_id" Type="nvarchar" Size="10" />
      <Input Name="operator_authority_name" Type="nvarchar" Size="20" />
      <Input Name="permit_mail_send_flg" Type="nvarchar" Size="1" />
      <Input Name="permit_approval_flg" Type="nvarchar" Size="1" />
      <Input Name="permit_edit_flg" Type="nvarchar" Size="1" />
      <Input Name="permit_unlock_flg" Type="nvarchar" Size="1" />
      <Input Name="permit_edit_signature_flg" Type="nvarchar" Size="1" />
      <Input Name="receive_no_assign_warning_flg" Type="nvarchar" Size="1" />
      <Input Name="last_changed" Type="nvarchar" Size="20" />
      <Input Name="permit_permanent_delete_flg" Type="nvarchar" Size="1" />
    </Parameter>
  </Register>

  <!-- 更新 -->
  <Update>
    <Statement>
      <![CDATA[
        UPDATE  w2_CsOperatorAuthority
           SET  w2_CsOperatorAuthority.operator_authority_name = @operator_authority_name,
                w2_CsOperatorAuthority.permit_mail_send_flg = @permit_mail_send_flg,
                w2_CsOperatorAuthority.permit_approval_flg = @permit_approval_flg,
                w2_CsOperatorAuthority.permit_edit_flg = @permit_edit_flg,
                w2_CsOperatorAuthority.permit_unlock_flg = @permit_unlock_flg,
                w2_CsOperatorAuthority.permit_edit_signature_flg = @permit_edit_signature_flg,
                w2_CsOperatorAuthority.receive_no_assign_warning_flg = @receive_no_assign_warning_flg,
                w2_CsOperatorAuthority.date_changed = getdate(),
                w2_CsOperatorAuthority.last_changed = @last_changed,
                w2_CsOperatorAuthority.permit_permanent_delete_flg = @permit_permanent_delete_flg
         WHERE  w2_CsOperatorAuthority.dept_id = @dept_id
           AND  w2_CsOperatorAuthority.operator_authority_id = @operator_authority_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="operator_authority_id" Type="nvarchar" Size="10" />
      <Input Name="operator_authority_name" Type="nvarchar" Size="20" />
      <Input Name="permit_mail_send_flg" Type="nvarchar" Size="1" />
      <Input Name="permit_approval_flg" Type="nvarchar" Size="1" />
      <Input Name="permit_edit_flg" Type="nvarchar" Size="1" />
      <Input Name="permit_unlock_flg" Type="nvarchar" Size="1" />
      <Input Name="permit_edit_signature_flg" Type="nvarchar" Size="1" />
      <Input Name="receive_no_assign_warning_flg" Type="nvarchar" Size="1" />
      <Input Name="last_changed" Type="nvarchar" Size="20" />
      <Input Name="permit_permanent_delete_flg" Type="nvarchar" Size="1" />
    </Parameter>
  </Update>

  <!-- 削除 -->
  <Delete>
    <Statement>
      <![CDATA[
        DELETE
          FROM  w2_CsOperatorAuthority
         WHERE  w2_CsOperatorAuthority.dept_id = @dept_id
           AND  w2_CsOperatorAuthority.operator_authority_id = @operator_authority_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="operator_authority_id" Type="nvarchar" Size="10" />
    </Parameter>
  </Delete>

  <!-- CSオペレータ権限情報削除前使用チェック -->
  <CheckCsOperatorAuthorityUsed>
    <Statement>
      <![CDATA[
        SELECT  *
          FROM  w2_CsOperator
         WHERE  dept_id = @dept_id
           AND  operator_authority_id = @operator_authority_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="operator_authority_id" Type="nvarchar" Size="10" />
    </Parameter>
  </CheckCsOperatorAuthorityUsed>
</CsOperatorAuthority>
