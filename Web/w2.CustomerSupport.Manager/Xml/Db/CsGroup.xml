<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : CSグループ系SQLステートメントXML(CsGroup.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2013 All Rights Reserved.
=========================================================================================================
-->
<CsGroup>

  <!-- 全取得 -->
  <GetAll>
    <Statement>
      <![CDATA[
        SELECT  *
          FROM  w2_CsGroup
         WHERE  w2_CsGroup.dept_id = @dept_id
      ORDER BY  w2_CsGroup.display_order, convert(int, w2_CsGroup.cs_group_id)
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
    </Parameter>
  </GetAll>

  <!-- 取得 -->
  <Get>
    <Statement>
      <![CDATA[
        SELECT  *
          FROM  w2_CsGroup
         WHERE  w2_CsGroup.dept_id = @dept_id
           AND  w2_CsGroup.cs_group_id = @cs_group_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="cs_group_id" Type="nvarchar" Size="10" />
    </Parameter>
  </Get>
  
  <!-- 有効なグループ取得 -->
  <GetValidAll>
    <Statement>
      <![CDATA[
        SELECT  *
          FROM  w2_CsGroup
         WHERE  w2_CsGroup.dept_id = @dept_id
           AND  w2_CsGroup.valid_flg = '1'
      ORDER BY  w2_CsGroup.display_order, convert(int, w2_CsGroup.cs_group_id)
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
    </Parameter>
  </GetValidAll>

  <!-- 登録 -->
  <Register>
    <Statement>
      <![CDATA[
        INSERT  w2_CsGroup
             (  
                dept_id,
                cs_group_id,
                cs_group_name,
                display_order,
                valid_flg,
                last_changed
              )
              VALUES
              (
                @dept_id,
                @cs_group_id,
                @cs_group_name,
                @display_order,
                @valid_flg,
                @last_changed
              )
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="cs_group_id" Type="nvarchar" Size="10" />
      <Input Name="cs_group_name" Type="nvarchar" Size="30" />
      <Input Name="display_order" Type="int" />
      <Input Name="valid_flg" Type="nvarchar" Size="1" />
      <Input Name="last_changed" Type="nvarchar" Size="20" />
    </Parameter>
  </Register>
  
  <!-- 更新 -->
  <Update>
    <Statement>
      <![CDATA[
        UPDATE  w2_CsGroup
           SET  w2_CsGroup.cs_group_name = @cs_group_name,
                w2_CsGroup.display_order = @display_order,
                w2_CsGroup.valid_flg = @valid_flg,
                w2_CsGroup.date_changed = getdate(),
                w2_CsGroup.last_changed = @last_changed
         WHERE  w2_CsGroup.dept_id = @dept_id
           AND  w2_CsGroup.cs_group_id = @cs_group_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="cs_group_id" Type="nvarchar" Size="10" />
      <Input Name="cs_group_name" Type="nvarchar" Size="30" />
      <Input Name="display_order" Type="int" />
      <Input Name="valid_flg" Type="nvarchar" Size="1" />
      <Input Name="last_changed" Type="nvarchar" Size="20" />
    </Parameter>
  </Update>

  <!-- 削除 -->
  <Delete>
    <Statement>
      <![CDATA[
        DELETE  
          FROM  w2_CsGroup
         WHERE  w2_CsGroup.dept_id = @dept_id
           AND  w2_CsGroup.cs_group_id = @cs_group_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="cs_group_id" Type="nvarchar" Size="10" />
    </Parameter>
  </Delete>

</CsGroup>