<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : デザイン定義・商品一覧ページXML(Design_Page_02ProductList.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2009 All Rights Reserved.
=========================================================================================================
-->
<Design_Page>

  <!--－－－－－－－－－－－－－－－－－－－－－－－－－-->
  <!-- 商品一覧ページ -->
  <!--－－－－－－－－－－－－－－－－－－－－－－－－－-->
  <PageSetting name="商品一覧ページ" path="Form\Product\ProductList.aspx">
    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.HtmlEncode(this.SeoKeywords) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧用SEOキーワードをHTMLエンコードして出力します。
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.HtmlEncode(this.SeoDescription) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧用SEOディスクリプションをHTMLエンコードして出力します。
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <Raw><![CDATA[<uc:BodyProductCategoryLinks runat="server"></uc:BodyProductCategoryLinks>]]></Raw>
      <Description>
        <![CDATA[
        カテゴリぱんくずリンク一覧を出力します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<uc:BodyProductCategoryHtml runat="server" />]]></Raw>
      <Description>
        <![CDATA[
        カテゴリHTMLが存在する場合にHTMLを読み込み出力します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<uc:BodyProductSortBox runat="server"></uc:BodyProductSortBox>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧のソートリンクを出力します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<%# this.PagerHtml %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧のページャーリンクを出力します。
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.HtmlEncode(this.AlertMessage) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧用アラートメッセージを出力します。（商品0件の時など）
        ]]>
      </Description>
    </TagSetting>

    <!-- 商品子カテゴリリストループ用 -->
    <TagSetting>
      <RawBgn>
        <![CDATA[<%-- ▽商品子カテゴリリスト▽ --%>
<asp:Repeater DataSource=<%# this.ProductCategoryList %> runat="server">
<HeaderTemplate>]]>
      </RawBgn>
      <RawItemBgn>
        <![CDATA[</HeaderTemplate>
<ItemTemplate>]]>
      </RawItemBgn>
      <RawItemEnd>
        <![CDATA[</ItemTemplate>
<FooterTemplate>]]>
      </RawItemEnd>
      <RawEnd>
        <![CDATA[</FooterTemplate>
</asp:Repeater>
<%-- △商品子カテゴリリスト△ --%>]]>
      </RawEnd>
      <Description>
        <![CDATA[
        商品一覧子カテゴリ一覧ループを指定します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.UrlAttrHtmlEncode(CreateCategoryLinkUrl(Eval(Constants.FIELD_PRODUCTCATEGORY_SHOP_ID), Eval(Constants.FIELD_PRODUCTCATEGORY_CATEGORY_ID), Eval(Constants.FIELD_PRODUCTCATEGORY_URL))) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧子カテゴリ一覧ループ内でカテゴリURLをHTMLエンコードして出力します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.HtmlEncode(Eval(Constants.FIELD_PRODUCTCATEGORY_NAME)) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧子カテゴリ一覧ループ内でカテゴリ名をHTMLエンコードして出力します。
        ]]>
      </Description>
    </TagSetting>

    <!-- 商品一覧ループ用 -->
    <TagSetting>
      <RawBgn><![CDATA[<div visible="<%# (this.ProductMasterList.Count != 0) %>" runat="server">]]></RawBgn>
      <RawEnd><![CDATA[</div><!-- (this.ProductMasterList.Count != 0) -->]]></RawEnd>
      <Description>
        <![CDATA[
        商品一覧の商品がある場合に表示する領域を指定します。
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <RawBgn>
        <![CDATA[<%-- ▽商品一覧ループ(通常表示)▽ --%>
<asp:Repeater DataSource=<%# this.ProductMasterList %> runat="server" Visible="<%# (this.DispImageKbn == Constants.KBN_REQUEST_DISP_IMG_KBN_ON) %>">
<HeaderTemplate>]]>
      </RawBgn>
      <RawItemBgn>
        <![CDATA[</HeaderTemplate>
<ItemTemplate>]]>
      </RawItemBgn>
      <RawItemEnd>
        <![CDATA[</ItemTemplate>
<FooterTemplate>]]>
      </RawItemEnd>
      <RawEnd>
        <![CDATA[</FooterTemplate>
</asp:Repeater>
<%-- △商品一覧ループ(通常表示)△ --%>]]>
      </RawEnd>
      <Description>
        <![CDATA[
        商品一覧のループ（通常）を指定します。
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <RawBgn>
        <![CDATA[<%-- ▽商品一覧ループ(ウインドウショッピング)▽ --%>
<asp:Repeater DataSource=<%# this.ProductMasterList %> runat="server" Visible="<%# (this.DispImageKbn == Constants.KBN_REQUEST_DIST_IMG_KBN_WINDOWSHOPPING) %>">
<HeaderTemplate>]]>
      </RawBgn>
      <RawItemBgn>
        <![CDATA[</HeaderTemplate>
<ItemTemplate>]]>
      </RawItemBgn>
      <RawItemEnd>
        <![CDATA[</ItemTemplate>
<FooterTemplate>]]>
      </RawItemEnd>
      <RawEnd>
        <![CDATA[</FooterTemplate>
</asp:Repeater>
<%-- △商品一覧ループ(ウインドウショッピング)△ --%>]]>
      </RawEnd>
      <Description>
        <![CDATA[
        商品一覧のループ（ウインドウショッピング）を指定します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <RawHead><![CDATA[<%# WebSanitizer.HtmlEncode(GetProductData(Container.DataItem, "]]></RawHead>
      <RawFoot><![CDATA[")) %>]]></RawFoot>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品情報をHTMLエンコードして出力します。
        （「***」はフィールド名を指定）
        フィールド名は商品マスタ資料から確認できます。
        
        ・記述例
        「<%# WebSanitizer.HtmlEncode(GetProductData(Container.DataItem, "name")) %>」
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <RawHead><![CDATA[<%# GetProductDataHtml(Container.DataItem, "]]></RawHead>
      <RawFoot><![CDATA[") %>]]></RawFoot>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品情報をHTMLエンコードせず出力します。
        （「***」はフィールド名を指定。商品概要・商品説明のみ）
        フィールド名は商品マスタ資料から確認できます。
        
        ・記述例
        「<%# GetProductDataHtml(Container.DataItem, "outline") %>」
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.UrlAttrHtmlEncode(CreateProductDetailUrl(Container.DataItem)) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品詳細URLをHTMLエンコードして出力します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<uc:BodyProductVariationImages ImageSize="M" ProductMaster="<%# Container.DataItem %>" VariationList="<%# this.ProductVariationList %>" VariationNo="<%# Container.ItemIndex %>" runat="server" />]]></Raw>
      <Description>
        <![CDATA[
        商品一覧ループ内でバリエーションの特定項目でグループ化したサムネイル画像を表示します。
        ※特定項目の指定はサイト導入時に設定します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<w2c:ProductImage ImageSize="M" ProductMaster=<%# Container.DataItem %> IsVariation="false" runat="server" />]]></Raw>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品画像を出力します。　※ImageSizeはS/M/L/LLが指定可能です。
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <Raw><![CDATA[<w2c:ProductIcon IconNo="1" ProductMaster=<%# Container.DataItem %> runat="server" />]]></Raw>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品アイコン1画像を出力します。　※IconNoは1～10まで指定可能です。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <RawBgn>
        <![CDATA[<%-- ▽商品通常価格有効▽ --%>
<span visible='<%# GetProductNormalPriceValid(Container.DataItem) %>' runat="server">]]>
      </RawBgn>
      <RawEnd>
        <![CDATA[</span>
<%-- △商品通常価格有効△ --%>]]>
      </RawEnd>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品表示価格が有効なときに表示する領域を指定します。
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <RawBgn>
        <![CDATA[<%-- ▽商品特別価格有効▽ --%>
<span visible='<%# GetProductSpecialPriceValid(Container.DataItem) %>' runat="server">]]>
      </RawBgn>
      <RawEnd>
        <![CDATA[</span>
<%-- △商品特別価格有効△ --%>]]>
      </RawEnd>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品表示特別価格が有効なときに表示する領域を指定します。
        ]]>
      </Description>
    </TagSetting>    
    
    <TagSetting>
      <RawBgn>
        <![CDATA[<%-- ▽商品セール価格有効▽ --%>
<span visible='<%# GetProductTimeSalesValid(Container.DataItem) %>' runat="server">]]>
      </RawBgn>
      <RawEnd>
        <![CDATA[</span>
<%-- △商品セール価格有効△ --%>]]>
      </RawEnd>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品セール価格が有効なときに表示する領域を指定します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <RawBgn>
        <![CDATA[<%-- ▽商品会員ランク価格有効▽ --%>
<span visible='<%# GetProductMemberRankPriceValid(Container.DataItem) %>' runat="server">]]>
      </RawBgn>
      <RawEnd>
        <![CDATA[</span>
<%-- △商品会員ランク価格有効△ --%>]]>
      </RawEnd>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品会員ランク価格が有効なときに表示する領域を指定します。
        ]]>
      </Description>
    </TagSetting>

    
    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.HtmlEncode(GetProductPriceNumeric(Container.DataItem)) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品表示価格を出力します。
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.HtmlEncode(GetProductSpecialPriceNumeric(Container.DataItem)) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品表示特別価格を出力します。
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.HtmlEncode(GetProductTimeSalePriceNumeric(Container.DataItem)) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品セール価格を出力します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.HtmlEncode(GetProductMemberRankPrice(Container.DataItem)) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品会員ランク価格を出力します。
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.HtmlEncode(GetTaxIncludeString(Container.DataItem)) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧ループ内で税込表記を出力します。
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <RawBgn>
        <![CDATA[<%-- ▽商品加算ポイント▽ --%>
<p visible='<%# (this.IsLoggedIn && (GetProductAddPointString(Container.DataItem) != "")) %>' runat="server">]]>
      </RawBgn>
      <RawEnd>
        <![CDATA[</p>
<%-- △商品加算ポイント△ --%>]]>
      </RawEnd>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品加算ポイントが有効なときに表示する領域を指定します。
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.HtmlEncode(GetProductAddPointString(Container.DataItem)) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧ループ内で商品加算ポイントを出力します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.HtmlEncode(GetProductAddPointCalculateAfterString(Container.DataItem, false, false)) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧ループ内で価格から計算した商品加算ポイントを出力します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<p visible='<%# IsProductSoldOut(Container.DataItem) %>' runat="server"></p>]]></Raw>
      <Description>
        <![CDATA[
       商品一覧ループ内で 商品の売切れ状態が有効のときに表示する領域を指定します。
        商品バリエーションを利用している場合、何れかの在庫が存在する場合は無効と判断します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<%# WebSanitizer.UrlAttrHtmlEncode(CreateAddFavoriteUrl(Container.DataItem)) %>]]></Raw>
      <Description>
        <![CDATA[
        商品一覧ループ内でお気に入り登録URLを出力します。
        ]]>
      </Description>
    </TagSetting>

    <!-- 入荷通知登録フォーム -->
    <TagSetting>
      <Raw><![CDATA[<uc:BodyProductArrivalMailRegister runat="server" ID="ucBpamrArrival" ArrivalMailKbn="<%#: Constants.FLG_USERPRODUCTARRIVALMAIL_ARRIVAL_MAIL_KBN_ARRIVAL %>" ProductId="<%#: GetKeyValue(Container.DataItem, Constants.FIELD_PRODUCT_PRODUCT_ID) %>" VariationId="<%#: GetKeyValue(Container.DataItem, Constants.FIELD_PRODUCTVARIATION_VARIATION_ID) %>" Visible="false" />]]></Raw>
      <Description>
        <![CDATA[
        商品バリエーションループ内で再入荷通知メール登録フォームを表示します。
        ]]>
      </Description>
    </TagSetting>
    <TagSetting>
      <Raw><![CDATA[<uc:BodyProductArrivalMailRegister runat="server" ID="ucBpamrRelease" ArrivalMailKbn="<%#: Constants.FLG_USERPRODUCTARRIVALMAIL_ARRIVAL_MAIL_KBN_RELEASE %>" ProductId="<%#: GetKeyValue(Container.DataItem, Constants.FIELD_PRODUCT_PRODUCT_ID) %>" VariationId="<%#: GetKeyValue(Container.DataItem, Constants.FIELD_PRODUCTVARIATION_VARIATION_ID) %>" Visible="false" />]]></Raw>
      <Description>
        <![CDATA[
        商品バリエーションループ内で 販売開始通知メール登録フォームを表示します。
        ]]>
      </Description>
    </TagSetting>
    <TagSetting>
      <Raw><![CDATA[<uc:BodyProductArrivalMailRegister runat="server" ID="ucBpamrResale" ArrivalMailKbn="<%#: Constants.FLG_USERPRODUCTARRIVALMAIL_ARRIVAL_MAIL_KBN_RESALE %>" ProductId="<%#: GetKeyValue(Container.DataItem, Constants.FIELD_PRODUCT_PRODUCT_ID) %>" VaridationId="<%#: GetKeyValue(Container.DataItem, Constants.FIELD_PRODUCTVARIATION_VARIATION_ID) %>" Visible="false" />]]></Raw>
      <Description>
        <![CDATA[
        商品バリエーションループ内で再販売通知メール登録フォームを表示します。
        ]]>
      </Description>
    </TagSetting>
    <!-- 入荷通知登録フォーム（trタグから始まる。テーブルタグ内用） -->
    <TagSetting>
      <Raw><![CDATA[<uc:BodyProductArrivalMailRegisterTr runat="server" ID="ucBpamrArrival" ArrivalMailKbn="<%#: Constants.FLG_USERPRODUCTARRIVALMAIL_ARRIVAL_MAIL_KBN_ARRIVAL %>" ProductId="<%#: GetKeyValue(Container.DataItem, Constants.FIELD_PRODUCT_PRODUCT_ID) %>" VariationId="<%#: GetKeyValue(Container.DataItem, Constants.FIELD_PRODUCTVARIATION_VARIATION_ID) %>" Visible="false" />]]></Raw>
      <Description>
        <![CDATA[
        商品バリエーションループ内で再入荷通知メール登録フォームを表示します。（テーブルタグ内trの位置に挿入してください。
        ]]>
      </Description>
    </TagSetting>
    <TagSetting>
      <Raw><![CDATA[<uc:BodyProductArrivalMailRegisterTr runat="server" ID="ucBpamrRelease" ArrivalMailKbn="<%#: Constants.FLG_USERPRODUCTARRIVALMAIL_ARRIVAL_MAIL_KBN_RELEASE %>" ProductId="<%#: GetKeyValue(Container.DataItem, Constants.FIELD_PRODUCT_PRODUCT_ID) %>" VariationId="<%#: GetKeyValue(Container.DataItem, Constants.FIELD_PRODUCTVARIATION_VARIATION_ID) %>" Visible="false" />]]></Raw>
      <Description>
        <![CDATA[
        商品バリエーションループ内で 販売開始通知メール登録フォームを表示します。（テーブルタグ内trの位置に挿入してください。
        ]]>
      </Description>
    </TagSetting>
    <TagSetting>
      <Raw><![CDATA[<uc:BodyProductArrivalMailRegisterTr runat="server" ID="ucBpamrResale" ArrivalMailKbn="<%#: Constants.FLG_USERPRODUCTARRIVALMAIL_ARRIVAL_MAIL_KBN_RESALE %>" ProductId="<%#: GetKeyValue(Container.DataItem, Constants.FIELD_PRODUCT_PRODUCT_ID) %>" VaridationId="<%#: GetKeyValue(Container.DataItem, Constants.FIELD_PRODUCTVARIATION_VARIATION_ID) %>" Visible="false" />]]></Raw>
      <Description>
        <![CDATA[
        商品バリエーションループ内で再販売通知メール登録フォームを表示します。（テーブルタグ内trの位置に挿入してください。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <RawBgn>
        <![CDATA[<asp:Repeater ID="rSetPromotion" DataSource="<%# GetSetPromotionByProduct((DataRowView)Container.DataItem) %>" runat="server">
<ItemTemplate>]]>
      </RawBgn>
      <RawEnd>
        <![CDATA[</ItemTemplate>
</asp:Repeater>]]>
      </RawEnd>
      <Description>
        <![CDATA[
        該当商品を含むセットプロモーションの一覧ループを指定します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<%# ((SetPromotionModel)Container.DataItem).SetpromotionDispName %>]]></Raw>
      <Description>
        <![CDATA[
        セットプロモーション一覧ループ内でセットプロモーション名を出力します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<%# GetProductDescHtml(((SetPromotionModel)Container.DataItem).DescriptionKbn, ((SetPromotionModel)Container.DataItem).Description) %>]]></Raw>
      <Description>
        <![CDATA[
        セットプロモーション一覧ループ内でセットプロモーションの表示文言を出力します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <Raw><![CDATA[<%# ((SetPromotionModel)Container.DataItem).Url %>]]></Raw>
      <Description>
        <![CDATA[
        セットプロモーション一覧ループ内でセットプロモーションのURLを出力します。
        ]]>
      </Description>
    </TagSetting>

    <TagSetting>
      <RawHead><![CDATA[<%# (Container.ItemIndex % 3 == 0) ? "]]></RawHead>
      <RawFoot><![CDATA[" : "" %>]]></RawFoot>
      <Description>
        <![CDATA[
        商品一覧ループ(ウインドウショッピング)の行区切りタグ（開始）を出力します。
         （「***」は行区切りのタグ（開始）を記述）
        ※通常はウインドウショッピングループ内部の先頭に記述してください。
        
        ・記述例
        「<%# (Container.ItemIndex % 3 == 0) ? "<li class='windowColumn clearFix'><ul>" : "" %>」
        ]]>
      </Description>
    </TagSetting>
    
    <TagSetting>
      <RawHead><![CDATA[<%# ((Container.ItemIndex % 3 == 2) || (Container.ItemIndex == ((IList)((Repeater)Container.Parent).DataSource).Count - 1)) ? "]]></RawHead>
      <RawFoot><![CDATA[" : "" %>]]></RawFoot>
      <Description>
        <![CDATA[
        商品一覧ループ(ウインドウショッピング)の行区切りタグ（終端）を出力します。
         （「***」は行区切りのタグ（開始）を記述）
        ※通常はウインドウショッピングループ内部の終端に記述してください。

        ・記述例
        「<%# ((Container.ItemIndex % 3 == 2) || (Container.ItemIndex == ((IList)((Repeater)Container.Parent).DataSource).Count - 1)) ? "</ul></li>" : "" %>」
        ]]>
      </Description>
    </TagSetting>
    
  </PageSetting>

</Design_Page>