<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : 商品カテゴリ系SQLサブステートメントXML(ProductCategory_Sub.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2009 All Rights Reserved.
=========================================================================================================
-->
<ProductCategory_Sub>

  <!-- 商品カテゴリ情報一覧取得用WHERE文 -->
  <PRODUCTCATEGORY_SEARCH_WHERE>
    <Statement>
      <![CDATA[
         WHERE  w2_ProductCategory.shop_id = @shop_id 
           AND  (
                   @srch_key = 0 AND w2_ProductCategory.category_id LIKE @category_id_like_escaped + '%' ESCAPE '#'
                   OR
                   @srch_key = 1 AND w2_ProductCategory.category_id LIKE @category_id_like_escaped + '%' ESCAPE '#'
                   OR
                   @srch_key = 2 AND (w2_ProductCategory.parent_category_id = @parent_category_id AND w2_ProductCategory.category_id LIKE @category_id_like_escaped + '%' ESCAPE '#')
                   OR
                   @srch_key = 99
                )
      ]]>
    </Statement>
  </PRODUCTCATEGORY_SEARCH_WHERE>

  <!-- 商品カテゴリ情報一覧取得用ORDER_BY -->
  <PRODUCTCATEGORY_SEARCH_ORDER_BY>
    <Statement>
      <![CDATA[
        ORDER BY
          -- 常に一定の結果セットを得るため、主キー（昇順）ソート
          w2_ProductCategory.shop_id ASC, w2_ProductCategory.category_id ASC
      ]]>
    </Statement>
  </PRODUCTCATEGORY_SEARCH_ORDER_BY>

</ProductCategory_Sub>