<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : カテゴリ検索SQLサブステートメントXML(ProductCategorySearch_Sub.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2012 All Rights Reserved.
=========================================================================================================
-->
<ProductCategorySearch_Sub>
  <!-- カテゴリ検索用一覧取得WHERE文 -->
  <CATEGORY_SEARCH_WHERE>
    <Statement>
      <![CDATA[
         WHERE  w2_ProductCategory.shop_id = @shop_id
           AND  w2_ProductCategory.valid_flg = '1'
           AND  (
                  @category_id_like_escaped = ''
                  OR
                  w2_ProductCategory.category_id LIKE @category_id_like_escaped + '%' ESCAPE '#'
                )
           AND  (
                  @name_like_escaped = ''
                  OR
                  w2_ProductCategory.name LIKE '%' + @name_like_escaped + '%' ESCAPE '#'
                )
      ]]>
    </Statement>
  </CATEGORY_SEARCH_WHERE>

  <!-- カテゴリ検索用一覧取得ORDER BY -->
  <CATEGORY_SEARCH_ORDER_BY>
    <Statement>
      <![CDATA[
        ORDER BY
          -- 常に一定の結果セットを得るため、主キー（昇順）ソート
          w2_ProductCategory.shop_id ASC, w2_ProductCategory.category_id ASC
      ]]>
    </Statement>
  </CATEGORY_SEARCH_ORDER_BY>
</ProductCategorySearch_Sub>