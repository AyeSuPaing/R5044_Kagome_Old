<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : 商品系SQLステートメントXML(Product.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2009 All Rights Reserved.
=========================================================================================================
-->
<Product>
  <!-- 商品情報一覧取得 -->
  <GetProductList>
    <Statement>
      <![CDATA[
        /* ダーティリードを許可して共有ロックを掛けなくする */
        SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
        
        -- 該当情報取得
        SELECT  w2_Product.shop_id,
                w2_Product.product_id,
                w2_Product.name,
                w2_Product.name_kana,
                w2_Product.stock_management_kbn,
                w2_Product.display_price,
                w2_Product.valid_flg,
                CASE
                  WHEN w2_Product.display_from <= GETDATE() AND ((w2_Product.display_to IS NULL) OR (GETDATE() <= w2_Product.display_to)) THEN '表示中'
                  ELSE '-' 
                END AS display,
                CASE
                  WHEN w2_Product.sell_from <= GETDATE() AND ((w2_Product.sell_to IS NULL) OR (GETDATE() <= w2_Product.sell_to)) THEN '販売中'
                  ELSE '-' 
                END AS sell,
                w2_Product.use_variation_flg,
                w2_Product.date_created,
                w2_Product.date_changed
          FROM  (
                  SELECT  w2_Product.shop_id,
                          w2_Product.product_id,
                          ROW_NUMBER()
                          OVER
                          (
                            [[ PRODUCT_SEARCH_ORDER_BY ]]
                          ) AS row_num
                    FROM  w2_Product
                          [[ PRODUCT_SEARCH_WHERE ]]
                ) AS RowIndex
                INNER JOIN w2_Product ON
                (
                  RowIndex.shop_id = w2_Product.shop_id
                  AND
                  RowIndex.product_id = w2_Product.product_id
                )
         WHERE  @bgn_row_num <= RowIndex.row_num
           AND  RowIndex.row_num <= @end_row_num
      ORDER BY  RowIndex.row_num ASC
      ]]>
    </Statement>
    <Parameter>
      <Input Name="bgn_row_num" Type="int" />
      <Input Name="end_row_num" Type="int" />
    </Parameter>
  </GetProductList>

  <!-- 商品情報該当件数取得 -->
  <GetProductCount>
    <Statement>
      <![CDATA[
        /* ダーティリードを許可して共有ロックを掛けなくする */
        SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
        
        -- 全件数取得
        SELECT  ISNULL(COUNT(w2_Product.product_id), 0) AS row_count
          FROM  w2_Product
                [[ PRODUCT_SEARCH_WHERE ]]
      ]]>
    </Statement>
  </GetProductCount>
  
  <!-- 商品マスタ情報取得(CSV出力用) -->
  <GetProductMaster>
    <Statement>
      <![CDATA[
        /* ダーティリードを許可して共有ロックを掛けなくする */
        SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
        
        SELECT  @@ fields @@
          FROM  w2_Product
                [[ PRODUCT_SEARCH_WHERE ]]
                [[ PRODUCT_SEARCH_ORDER_BY ]]
      ]]>
    </Statement>
  </GetProductMaster>

  <!-- 商品バリエーションマスタ情報取得(CSV出力用) -->
  <GetProductVariationMaster>
    <Statement>
      <![CDATA[
        /* ダーティリードを許可して共有ロックを掛けなくする */
        SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
        
        SELECT  @@ fields @@
          FROM  w2_Product
                INNER JOIN w2_ProductVariation ON
                (
                  w2_Product.shop_id = w2_ProductVariation.shop_id
                  AND
                  w2_Product.product_id = w2_ProductVariation.product_id
                )
                [[ PRODUCT_SEARCH_WHERE ]]
                [[ PRODUCT_SEARCH_ORDER_BY ]]
      ]]>
    </Statement>
  </GetProductVariationMaster>

  <!-- 会員ランク価格取得 -->
  <GetProductPriceMaster>
    <Statement>
      <![CDATA[
        /* ダーティリードを許可して共有ロックを掛けなくする */
        SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
        
        SELECT  @@ fields @@
          FROM  w2_Product
                INNER JOIN w2_ProductPrice ON
                (
                  w2_Product.shop_id = w2_ProductPrice.shop_id
                  AND
                  w2_Product.product_id = w2_ProductPrice.product_id
                )
                [[ PRODUCT_SEARCH_WHERE ]]
                [[ PRODUCT_SEARCH_ORDER_BY ]]
      ]]>
    </Statement>
  </GetProductPriceMaster>

  <!-- 商品タグマスタ情報取得(CSV出力用) -->
  <GetProductTagMaster>
    <Statement>
      <![CDATA[
        /* ダーティリードを許可して共有ロックを掛けなくする */
        SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
        
        SELECT  @@ fields @@
          FROM  w2_Product
                LEFT JOIN  w2_ProductTag ON
                (
                  w2_Product.product_id = w2_ProductTag.product_id
                )
                [[ PRODUCT_SEARCH_WHERE ]]
                [[ PRODUCT_SEARCH_ORDER_BY ]]
      ]]>
    </Statement>
  </GetProductTagMaster>

  <!-- 商品拡張項目マスタ情報取得(CSV出力用) -->
  <GetProductExtendMaster>
    <Statement>
      <![CDATA[
        /* ダーティリードを許可して共有ロックを掛けなくする */
        SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
        
        SELECT  @@ fields @@
          FROM  w2_Product
                LEFT JOIN  w2_ProductExtend ON
                (
                  w2_Product.shop_id = w2_ProductExtend.shop_id
                  AND
                  w2_Product.product_id = w2_ProductExtend.product_id
                )
                [[ PRODUCT_SEARCH_WHERE ]]
                [[ PRODUCT_SEARCH_ORDER_BY ]]
      ]]>
    </Statement>
  </GetProductExtendMaster>

  <!-- 商品情報取得（商品バリエーション情報数分取得）-->
  <GetProduct>
    <Statement>
      <![CDATA[
        /* ダーティリードを許可して共有ロックを掛けなくする */
        SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
        
        SELECT  w2_ProductView.*,
                RIGHT(w2_ProductView.variation_id, LEN(w2_ProductView.variation_id) - LEN(w2_ProductView.product_id)) AS v_id,
                w2_ProductExtend.*,
                w2_ShopShipping.shop_shipping_name,
                w2_ProductTag.*,
                w2_ProductTaxCategory.tax_category_name + ':' + CAST(w2_ProductTaxCategory.tax_rate as nvarchar) + '(%)' AS tax_category_name
          FROM  w2_ProductView 
                LEFT JOIN w2_ShopShipping ON
                (
                  w2_ProductView.shop_id = w2_ShopShipping.shop_id
                  AND
                  w2_ProductView.shipping_type = w2_ShopShipping.shipping_id
                )
                LEFT JOIN w2_ProductExtend ON
                (
                  w2_ProductView.shop_id = w2_ProductExtend.shop_id
                  AND
                  w2_ProductView.product_id = w2_ProductExtend.product_id
                )
                LEFT JOIN w2_ProductTag ON
                (
                  w2_ProductView.product_id = w2_ProductTag.product_id
                )
                LEFT JOIN w2_ProductTaxCategory ON
                (
                  w2_ProductView.tax_category_id = w2_ProductTaxCategory.tax_category_id
                )
         WHERE  w2_ProductView.shop_id = @shop_id 
           AND  w2_ProductView.product_id = @product_id 
        ORDER BY display_order
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="product_id" Type="nvarchar" Size="30" />
    </Parameter>
  </GetProduct>

  <!-- 商品情報取得（複数商品ID指定） -->
  <GetProducts>
    <Statement>
      <![CDATA[      
        SELECT  w2_Product.*
          FROM  w2_Product
         WHERE  w2_Product.shop_id = @shop_id 
           @@ where @@ -- 条件置換(product_id IN (xxx,xxx))
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
    </Parameter>
  </GetProducts>

  <!-- 商品マスタ情報取得(商品詳細URL出力用) -->
  <GetProductForExportUrl>
    <Statement>
      <![CDATA[
        /* ダーティリードを許可して共有ロックを掛けなくする */
        SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
        
        SELECT  w2_Product.shop_id,
                w2_Product.product_id,
                w2_Product.name,
                w2_Product.brand_id1,
                w2_ProductBrand.brand_name
          FROM  w2_Product
                LEFT JOIN w2_ProductBrand ON
                (
                  w2_Product.brand_id1 = w2_ProductBrand.brand_id
                )
                [[ PRODUCT_SEARCH_WHERE ]]
                [[ PRODUCT_SEARCH_ORDER_BY ]]
      ]]>
    </Statement>
  </GetProductForExportUrl>

  <!-- 商品情報登録 -->
  <InsertProduct>
    <Statement>
      <![CDATA[
        INSERT  w2_Product
                (
                  w2_Product.shop_id, 
                  w2_Product.product_id, 
                  w2_Product.note, 
                  w2_Product.supplier_id, 
                  w2_Product.cooperation_id1, 
                  w2_Product.cooperation_id2, 
                  w2_Product.cooperation_id3, 
                  w2_Product.cooperation_id4, 
                  w2_Product.cooperation_id5, 
                  w2_Product.mall_ex_product_id,
                  w2_Product.name, 
                  w2_Product.name_kana, 
                  w2_Product.seo_keywords,                  
                  w2_Product.catchcopy, 
                  w2_Product.search_keyword, 
                  w2_Product.outline_kbn, 
                  w2_Product.outline, 
                  w2_Product.desc_detail_kbn1, 
                  w2_Product.desc_detail1, 
                  w2_Product.desc_detail_kbn2, 
                  w2_Product.desc_detail2, 
                  w2_Product.desc_detail_kbn3, 
                  w2_Product.desc_detail3, 
                  w2_Product.desc_detail_kbn4, 
                  w2_Product.desc_detail4, 
                  w2_Product.return_exchange_message,
                  w2_Product.url, 
                  w2_Product.inquire_email, 
                  w2_Product.inquire_tel, 
                  w2_Product.display_price, 
                  w2_Product.display_special_price, 
                  w2_Product.shipping_type, 
                  w2_Product.shipping_size_kbn, 
                  w2_Product.product_color_id,
                  w2_Product.tax_included_flg, 
                  w2_Product.point_kbn1, 
                  w2_Product.point1,     
                  w2_Product.point_kbn2, 
                  w2_Product.point2,
                  w2_Product.display_from, 
                  w2_Product.display_to,             
                  w2_Product.sell_from, 
                  w2_Product.sell_to, 
                  w2_Product.max_sell_quantity, 
                  w2_Product.stock_management_kbn, 
                  w2_Product.stock_message_id,
                  w2_Product.display_kbn, 
                  w2_Product.category_id1, 
                  w2_Product.category_id2, 
                  w2_Product.category_id3, 
                  w2_Product.category_id4, 
                  w2_Product.category_id5, 
                  w2_Product.related_product_id_cs1,  
                  w2_Product.related_product_id_cs2,  
                  w2_Product.related_product_id_cs3,  
                  w2_Product.related_product_id_cs4,  
                  w2_Product.related_product_id_cs5,  
                  w2_Product.related_product_id_us1,  
                  w2_Product.related_product_id_us2,  
                  w2_Product.related_product_id_us3,  
                  w2_Product.related_product_id_us4,  
                  w2_Product.related_product_id_us5,  
                  w2_Product.image_head, 
                  w2_Product.icon_flg1, 
                  w2_Product.icon_term_end1, 
                  w2_Product.icon_flg2, 
                  w2_Product.icon_term_end2, 
                  w2_Product.icon_flg3, 
                  w2_Product.icon_term_end3, 
                  w2_Product.icon_flg4, 
                  w2_Product.icon_term_end4, 
                  w2_Product.icon_flg5, 
                  w2_Product.icon_term_end5, 
                  w2_Product.icon_flg6, 
                  w2_Product.icon_term_end6, 
                  w2_Product.icon_flg7, 
                  w2_Product.icon_term_end7, 
                  w2_Product.icon_flg8, 
                  w2_Product.icon_term_end8, 
                  w2_Product.icon_flg9, 
                  w2_Product.icon_term_end9, 
                  w2_Product.icon_flg10, 
                  w2_Product.icon_term_end10, 
                  w2_Product.use_variation_flg,
                  w2_Product.subscription_box_flg,
                  w2_Product.fixed_purchase_flg,
                  w2_Product.fixed_purchase_product_order_limit_flg,
                  w2_Product.product_order_limit_flg_fp,
                  w2_Product.member_rank_discount_flg,
                  w2_Product.display_member_rank,
                  w2_Product.buyable_member_rank,
                  w2_Product.valid_flg,
                  w2_Product.date_created, 
                  w2_Product.date_changed, 
                  w2_Product.last_changed,
                  w2_Product.google_shopping_flg,
                  w2_Product.product_option_settings,
                  w2_Product.arrival_mail_valid_flg,
                  w2_Product.release_mail_valid_flg,
                  w2_Product.resale_mail_valid_flg,
                  w2_Product.select_variation_kbn,
                  w2_Product.brand_id1,
                  w2_Product.brand_id2,
                  w2_Product.brand_id3,
                  w2_Product.brand_id4,
                  w2_Product.brand_id5,
                  w2_Product.use_recommend_flg,
                  w2_Product.plural_shipping_price_free_flg,
                  w2_Product.age_limit_flg,
                  w2_Product.gift_flg,
                  w2_Product.digital_contents_flg,
                  w2_Product.download_url,
                  w2_Product.display_sell_flg,
                  w2_Product.display_priority,
                  w2_Product.limited_payment_ids,
                  w2_Product.fixed_purchase_firsttime_price,
                  w2_Product.fixed_purchase_price,
                  w2_Product.bundle_item_display_type,
                  w2_Product.product_type,
                  w2_Product.limited_fixed_purchase_kbn1_setting,
                  w2_Product.limited_fixed_purchase_kbn3_setting,
                  w2_Product.cooperation_id6,
                  w2_Product.cooperation_id7,
                  w2_Product.cooperation_id8,
                  w2_Product.cooperation_id9,
                  w2_Product.cooperation_id10,
                  w2_Product.andmall_reservation_flg,
                  w2_Product.tax_category_id,
                  w2_Product.display_only_fixed_purchase_member_flg,
                  w2_Product.sell_only_fixed_purchase_member_flg,
                  w2_Product.product_weight_gram,
                  w2_Product.fixed_purchase_cancelable_count,
                  w2_Product.fixed_purchase_limited_user_level_ids,
                  w2_Product.fixed_purchase_next_shipping_product_id,
                  w2_Product.fixed_purchase_next_shipping_variation_id,
                  w2_Product.fixed_purchase_next_shipping_item_quantity,
                  w2_Product.fixed_purchase_limited_skipped_count,
                  w2_Product.next_shipping_item_fixed_purchase_kbn,
                  w2_Product.next_shipping_item_fixed_purchase_setting,
                  w2_Product.product_size_factor,
                  w2_Product.add_cart_url_limit_flg,
                  w2_Product.limited_fixed_purchase_kbn4_setting,
                  w2_Product.member_rank_point_exclude_flg
                ) 
        VALUES  (
                  @shop_id, 
                  @product_id, 
                  @note, 
                  @supplier_id, 
                  @cooperation_id1, 
                  @cooperation_id2, 
                  @cooperation_id3, 
                  @cooperation_id4, 
                  @cooperation_id5, 
                  @mall_ex_product_id,
                  @name, 
                  @name_kana, 
                  @seo_keywords,            
                  @catchcopy, 
                  @search_keyword, 
                  @outline_kbn, 
                  @outline, 
                  @desc_detail_kbn1, 
                  @desc_detail1, 
                  @desc_detail_kbn2, 
                  @desc_detail2, 
                  @desc_detail_kbn3, 
                  @desc_detail3, 
                  @desc_detail_kbn4, 
                  @desc_detail4, 
                  @return_exchange_message,
                  @url, 
                  @inquire_email, 
                  @inquire_tel, 
                  @display_price, 
                  @display_special_price, 
                  @shipping_type, 
                  @shipping_size_kbn, 
                  @product_color_id,
                  @tax_included_flg, 
                  @point_kbn1, 
                  @point1, 
                  @point_kbn2, 
                  @point2,
                  @display_from,
                  @display_to,
                  @sell_from, 
                  @sell_to, 
                  @max_sell_quantity, 
                  @stock_management_kbn, 
                  @stock_message_id,
                  @display_kbn, 
                  @category_id1, 
                  @category_id2, 
                  @category_id3, 
                  @category_id4, 
                  @category_id5, 
                  @related_product_id_cs1,  
                  @related_product_id_cs2,  
                  @related_product_id_cs3,  
                  @related_product_id_cs4,  
                  @related_product_id_cs5,  
                  @related_product_id_us1,  
                  @related_product_id_us2,  
                  @related_product_id_us3,  
                  @related_product_id_us4,  
                  @related_product_id_us5, 
                  @image_head, 
                  @icon_flg1, 
                  @icon_term_end1,
                  @icon_flg2,
                  @icon_term_end2,
                  @icon_flg3,
                  @icon_term_end3,
                  @icon_flg4,
                  @icon_term_end4,
                  @icon_flg5,
                  @icon_term_end5,
                  @icon_flg6,
                  @icon_term_end6,
                  @icon_flg7,
                  @icon_term_end7,
                  @icon_flg8,
                  @icon_term_end8,
                  @icon_flg9,
                  @icon_term_end9,
                  @icon_flg10,
                  @icon_term_end10,
                  @use_variation_flg,
                  @subscription_box_flg,
                  @fixed_purchase_flg,
                  @fixed_purchase_product_order_limit_flg,
                  @product_order_limit_flg_fp,
                  @member_rank_discount_flg,
                  @display_member_rank,
                  @buyable_member_rank,
                  @valid_flg,
                  getdate(),
                  getdate(), 
                  @last_changed,
                  @google_shopping_flg,
                  @product_option_settings,
                  @arrival_mail_valid_flg,
                  @release_mail_valid_flg,
                  @resale_mail_valid_flg,
                  @select_variation_kbn,
                  @brand_id1,
                  @brand_id2,
                  @brand_id3,
                  @brand_id4,
                  @brand_id5,
                  @use_recommend_flg,
                  @plural_shipping_price_free_flg,
                  @age_limit_flg,
                  @gift_flg,
                  @digital_contents_flg,
                  @download_url,
                  @display_sell_flg,
                  @display_priority,
                  @limited_payment_ids,
                  @fixed_purchase_firsttime_price,
                  @fixed_purchase_price,
                  @bundle_item_display_type,
                  @product_type,
                  @limited_fixed_purchase_kbn1_setting,
                  @limited_fixed_purchase_kbn3_setting,
                  @cooperation_id6,
                  @cooperation_id7,
                  @cooperation_id8,
                  @cooperation_id9,
                  @cooperation_id10,
                  @andmall_reservation_flg,
                  @tax_category_id,
                  @display_only_fixed_purchase_member_flg,
                  @sell_only_fixed_purchase_member_flg,
                  @product_weight_gram,
                  @fixed_purchase_cancelable_count,
                  @fixed_purchase_limited_user_level_ids,
                  @fixed_purchase_next_shipping_product_id,
                  @fixed_purchase_next_shipping_variation_id,
                  @fixed_purchase_next_shipping_item_quantity,
                  @fixed_purchase_limited_skipped_count,
                  @next_shipping_item_fixed_purchase_kbn,
                  @next_shipping_item_fixed_purchase_setting,
                  @product_size_factor,
                  @add_cart_url_limit_flg,
                  @limited_fixed_purchase_kbn4_setting,
                  @member_rank_point_exclude_flg
                )
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="supplier_id" Type="nvarchar" Size="20" />
      <Input Name="product_id" Type="nvarchar" Size="30" />
      <Input Name="cooperation_id1" Type="nvarchar" Size="30" />
      <Input Name="cooperation_id2" Type="nvarchar" Size="30" />
      <Input Name="cooperation_id3" Type="nvarchar" Size="30" />
      <Input Name="cooperation_id4" Type="nvarchar" Size="30" />
      <Input Name="cooperation_id5" Type="nvarchar" Size="30" />
      <Input Name="mall_ex_product_id" Type="nvarchar" Size="30" />
      <Input Name="maker_id" Type="nvarchar" Size="30" />
      <Input Name="maker_name" Type="nvarchar" Size="50" />
      <Input Name="name" Type="nvarchar" Size="100" />
      <Input Name="name_kana" Type="nvarchar" Size="100" />
      <Input Name="name2" Type="nvarchar" Size="100" />
      <Input Name="name2_kana" Type="nvarchar" Size="100" />
      <Input Name="seo_keywords" Type="nvarchar" Size="200" />
      <Input Name="catchcopy" Type="nvarchar" Size="60" />
      <Input Name="search_keyword" Type="nvarchar" Size="500" />
      <Input Name="outline_kbn" Type="nvarchar" Size="1" />
      <Input Name="outline" Type="nvarchar" Size="max" />
      <Input Name="desc_detail_kbn1" Type="nvarchar" Size="1" />
      <Input Name="desc_detail1" Type="ntext" />
      <Input Name="desc_detail_kbn2" Type="nvarchar" Size="1" />
      <Input Name="desc_detail2" Type="ntext" />
      <Input Name="desc_detail_kbn3" Type="nvarchar" Size="1" />
      <Input Name="desc_detail3" Type="ntext" />
      <Input Name="desc_detail_kbn4" Type="nvarchar" Size="1" />
      <Input Name="desc_detail4" Type="ntext" />
      <Input Name="return_exchange_message" Type="ntext" />
      <Input Name="note" Type="ntext" />
      <Input Name="display_price" Type="decimal" Size="18,3" />
      <Input Name="display_special_price" Type="decimal" Size="18,3" />
      <Input Name="tax_included_flg" Type="nvarchar" Size="1" />
      <Input Name="tax_rate" Type="int" />
      <Input Name="tax_round_type" Type="nvarchar" Size="20" />
      <Input Name="price_pretax" Type="decimal" Size="18,3" />
      <Input Name="price_shipping" Type="decimal" />
      <Input Name="shipping_type" Type="nvarchar" Size="10" />
      <Input Name="shipping_size_kbn" Type="nvarchar" Size="4" />
      <Input Name="product_color_id" Type="nvarchar" Size="50" />
      <Input Name="price_cost" Type="decimal" />
      <Input Name="kbn1" Type="nvarchar" Size="30" />
      <Input Name="kbn2" Type="nvarchar" Size="30" />
      <Input Name="kbn3" Type="nvarchar" Size="30" />
      <Input Name="kbn4" Type="nvarchar" Size="30" />
      <Input Name="kbn5" Type="nvarchar" Size="30" />
      <Input Name="point_kbn1" Type="nvarchar" Size="1" />
      <Input Name="point1" Type="decimal" />
      <Input Name="point_kbn2" Type="nvarchar" Size="1" />
      <Input Name="point2" Type="decimal" />
      <Input Name="point_kbn3" Type="nvarchar" Size="1" />
      <Input Name="point3" Type="decimal" />
      <Input Name="campaign_from" Type="datetime" />
      <Input Name="campaign_to" Type="datetime" />
      <Input Name="campaign_point_kbn" Type="nvarchar" Size="1" />
      <Input Name="campaign_point" Type="int" />
      <Input Name="display_from" Type="datetime" />
      <Input Name="display_to" Type="datetime" />
      <Input Name="sell_from" Type="datetime" />
      <Input Name="sell_to" Type="datetime" />
      <Input Name="before_sale_display_kbn" Type="nvarchar" Size="1" />
      <Input Name="after_sale_display_kbn" Type="nvarchar" Size="1" />
      <Input Name="max_sell_quantity" Type="int" />
      <Input Name="stock_management_kbn" Type="nvarchar" Size="1" />
      <Input Name="stock_message_id" Type="nvarchar" Size="30" />
      <Input Name="url" Type="nvarchar" Size="256" />
      <Input Name="inquire_email" Type="nvarchar" Size="256" />
      <Input Name="inquire_tel" Type="nvarchar" Size="30" />
      <Input Name="display_kbn" Type="nvarchar" Size="1" />
      <Input Name="category_id1" Type="nvarchar" Size="30" />
      <Input Name="category_id2" Type="nvarchar" Size="30" />
      <Input Name="category_id3" Type="nvarchar" Size="30" />
      <Input Name="category_id4" Type="nvarchar" Size="30" />
      <Input Name="category_id5" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_cs1" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_cs2" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_cs3" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_cs4" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_cs5" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_us1" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_us2" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_us3" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_us4" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_us5" Type="nvarchar" Size="30" />
      <Input Name="image_head" Type="nvarchar" Size="50" />
      <Input Name="icon_flg1" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end1" Type="datetime" />
      <Input Name="icon_flg2" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end2" Type="datetime" />
      <Input Name="icon_flg3" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end3" Type="datetime" />
      <Input Name="icon_flg4" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end4" Type="datetime" />
      <Input Name="icon_flg5" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end5" Type="datetime" />
      <Input Name="icon_flg6" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end6" Type="datetime" />
      <Input Name="icon_flg7" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end7" Type="datetime" />
      <Input Name="icon_flg8" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end8" Type="datetime" />
      <Input Name="icon_flg9" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end9" Type="datetime" />
      <Input Name="icon_flg10" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end10" Type="datetime" />        
      <Input Name="use_variation_flg" Type="nvarchar" Size="2" />
      <Input Name="subscription_box_flg" Type="nvarchar" Size="2" />
      <Input Name="fixed_purchase_flg" Type="nvarchar" Size="2" />
      <Input Name="fixed_purchase_product_order_limit_flg" Type="nvarchar" Size="1" />
      <Input Name="product_order_limit_flg_fp" Type="nvarchar" Size="1" />
      <Input Name="member_rank_discount_flg" Type="nvarchar" Size="1" />
      <Input Name="display_member_rank" Type="nvarchar" Size="30" />
      <Input Name="buyable_member_rank" Type="nvarchar" Size="30" />
      <Input Name="valid_flg" Type="nvarchar" Size="1" />
      <Input Name="date_created" Type="datetime" />
      <Input Name="date_changed" Type="datetime" />
      <Input Name="last_changed" Type="nvarchar" Size="20" />
      <Input Name="google_shopping_flg" Type="nvarchar" Size="1" />
      <Input Name="product_option_settings" Type="nvarchar" Size="max" />
      <Input Name="arrival_mail_valid_flg" Type="nvarchar" Size="1" />
      <Input Name="release_mail_valid_flg" Type="nvarchar" Size="1" />
      <Input Name="resale_mail_valid_flg" Type="nvarchar" Size="1" />
      <Input Name="select_variation_kbn" Type="nvarchar" Size="20" />
      <Input Name="brand_id1" Type="nvarchar" Size="30" />
      <Input Name="brand_id2" Type="nvarchar" Size="30" />
      <Input Name="brand_id3" Type="nvarchar" Size="30" />
      <Input Name="brand_id4" Type="nvarchar" Size="30" />
      <Input Name="brand_id5" Type="nvarchar" Size="30" />
      <Input Name="use_recommend_flg" Type="nvarchar" Size="1" />
      <Input Name="plural_shipping_price_free_flg" Type="nvarchar" Size="1" />
      <Input Name="gift_flg" Type ="nvarchar" Size="2" />
      <Input Name="age_limit_flg" Type="nvarchar" Size="1" />
      <Input Name="digital_contents_flg" Type="nvarchar" Size="1" />
      <Input Name="download_url" Type="nvarchar" Size="max" />
      <Input Name="display_sell_flg" Type="nvarchar" Size="1" />
      <Input Name="display_priority" Type="int" />
      <Input Name="limited_payment_ids" Type="nvarchar" Size="250"/>
      <Input Name="fixed_purchase_firsttime_price" Type="decimal" Size="18,3" />
      <Input Name="fixed_purchase_price" Type="decimal" Size="18,3" />
      <Input Name="bundle_item_display_type" Type="nvarchar" Size="10" />
      <Input Name="product_type" Type="nvarchar" Size="10" />
      <Input Name="limited_fixed_purchase_kbn1_setting" Type="nvarchar" Size="200"/>
      <Input Name="limited_fixed_purchase_kbn3_setting" Type="nvarchar" Size="200"/>
      <Input Name="cooperation_id6" Type="nvarchar" Size="50" />
      <Input Name="cooperation_id7" Type="nvarchar" Size="50" />
      <Input Name="cooperation_id8" Type="nvarchar" Size="50" />
      <Input Name="cooperation_id9" Type="nvarchar" Size="50" />
      <Input Name="cooperation_id10" Type="nvarchar" Size="50" />
      <Input Name="andmall_reservation_flg" Type="nvarchar" Size="3" />
      <Input Name="display_only_fixed_purchase_member_flg" Type="nvarchar" Size="1" />
      <Input Name="sell_only_fixed_purchase_member_flg" Type="nvarchar" Size="1" />
      <Input Name="tax_category_id" Type="nvarchar" Size="30" />
      <Input Name="product_weight_gram" Type="int" />
      <Input Name="fixed_purchase_cancelable_count" Type="int" />
      <Input Name="fixed_purchase_limited_user_level_ids" Type="nvarchar" Size="200" />
      <Input Name="fixed_purchase_next_shipping_product_id" Type="nvarchar" Size="30" />
      <Input Name="fixed_purchase_next_shipping_variation_id" Type="nvarchar" Size="60" />
      <Input Name="fixed_purchase_next_shipping_item_quantity" Type="int" />
      <Input Name="fixed_purchase_limited_skipped_count" Type="int" />
      <Input Name="next_shipping_item_fixed_purchase_kbn" Type="nvarchar" Size="10" />
      <Input Name="next_shipping_item_fixed_purchase_setting" Type="nvarchar" Size="10" />
      <Input Name="product_size_factor" Type="int" />
      <Input Name="add_cart_url_limit_flg" Type="nvarchar" Size="1" />
      <Input Name="limited_fixed_purchase_kbn4_setting" Type="nvarchar" Size="50"/>
      <Input Name="member_rank_point_exclude_flg" Type="nvarchar" Size="1"/>
    </Parameter>
  </InsertProduct>

  <!-- 商品情報更新 -->
  <UpdateProduct>
    <Statement>
      <![CDATA[
        UPDATE  w2_Product
           SET  w2_Product.product_id = @product_id,
                w2_Product.note = @note,
                w2_Product.supplier_id = @supplier_id,
                w2_Product.cooperation_id1 = @cooperation_id1,
                w2_Product.cooperation_id2 = @cooperation_id2,
                w2_Product.cooperation_id3 = @cooperation_id3,
                w2_Product.cooperation_id4 = @cooperation_id4,
                w2_Product.cooperation_id5 = @cooperation_id5,
                w2_Product.mall_ex_product_id = @mall_ex_product_id,
                w2_Product.name = @name,
                w2_Product.name_kana = @name_kana,
                w2_Product.seo_keywords = @seo_keywords,
                w2_Product.catchcopy = @catchcopy,
                w2_Product.catchcopy_mobile = '',
                w2_Product.search_keyword = @search_keyword,
                w2_Product.outline_kbn = @outline_kbn,
                w2_Product.outline = @outline,
                w2_Product.outline_mobile = '',
                w2_Product.desc_detail_kbn1 = @desc_detail_kbn1,
                w2_Product.desc_detail1 = @desc_detail1,
                w2_Product.desc_detail_kbn2 = @desc_detail_kbn2,
                w2_Product.desc_detail2 = @desc_detail2,
                w2_Product.desc_detail_kbn3 = @desc_detail_kbn3,
                w2_Product.desc_detail3 = @desc_detail3,
                w2_Product.desc_detail_kbn4 = @desc_detail_kbn4,
                w2_Product.desc_detail4 = @desc_detail4,
                w2_Product.return_exchange_message = @return_exchange_message,
                w2_Product.desc_detail1_mobile = '',
                w2_Product.desc_detail2_mobile = '',
                w2_Product.return_exchange_message_mobile = '',
                w2_Product.url = @url,
                w2_Product.inquire_email = @inquire_email,
                w2_Product.inquire_tel = @inquire_tel,
                w2_Product.display_price = @display_price,
                w2_Product.display_special_price = @display_special_price,
                w2_Product.shipping_type = @shipping_type,
                w2_Product.shipping_size_kbn = @shipping_size_kbn,
                w2_Product.product_color_id = @product_color_id,
                w2_Product.tax_included_flg = @tax_included_flg,
                w2_Product.point_kbn1 = @point_kbn1,
                w2_Product.point1 = @point1,
                w2_Product.point_kbn2 = @point_kbn2,
                w2_Product.point2 = @point2,
                w2_Product.display_from = @display_from,
                w2_Product.display_to = @display_to,
                w2_Product.sell_from = @sell_from,
                w2_Product.sell_to = @sell_to,
                w2_Product.max_sell_quantity = @max_sell_quantity,
                w2_Product.stock_management_kbn = @stock_management_kbn,
                w2_Product.stock_message_id = @stock_message_id,
                w2_Product.display_kbn = @display_kbn,
                w2_Product.category_id1 = @category_id1,
                w2_Product.category_id2 = @category_id2,
                w2_Product.category_id3 = @category_id3,
                w2_Product.category_id4 = @category_id4,
                w2_Product.category_id5 = @category_id5,
                w2_Product.related_product_id_cs1 = @related_product_id_cs1,
                w2_Product.related_product_id_cs2 = @related_product_id_cs2,
                w2_Product.related_product_id_cs3 = @related_product_id_cs3,
                w2_Product.related_product_id_cs4 = @related_product_id_cs4,
                w2_Product.related_product_id_cs5 = @related_product_id_cs5,
                w2_Product.related_product_id_us1 = @related_product_id_us1,
                w2_Product.related_product_id_us2 = @related_product_id_us2,
                w2_Product.related_product_id_us3 = @related_product_id_us3,
                w2_Product.related_product_id_us4 = @related_product_id_us4,
                w2_Product.related_product_id_us5 = @related_product_id_us5,
                w2_Product.image_head = @image_head,
                w2_Product.image_mobile = '',
                w2_Product.icon_flg1 = @icon_flg1,
                w2_Product.icon_term_end1 = @icon_term_end1,
                w2_Product.icon_flg3 = @icon_flg3,
                w2_Product.icon_term_end3 = @icon_term_end3,
                w2_Product.icon_flg2 = @icon_flg2,
                w2_Product.icon_term_end2 = @icon_term_end2,
                w2_Product.icon_flg4 = @icon_flg4,
                w2_Product.icon_term_end4 = @icon_term_end4,
                w2_Product.icon_flg5 = @icon_flg5,
                w2_Product.icon_term_end5 = @icon_term_end5,
                w2_Product.icon_flg6 = @icon_flg6,
                w2_Product.icon_term_end6 = @icon_term_end6,
                w2_Product.icon_flg7 = @icon_flg7,
                w2_Product.icon_term_end7 = @icon_term_end7,
                w2_Product.icon_flg8 = @icon_flg8,
                w2_Product.icon_term_end8 = @icon_term_end8,
                w2_Product.icon_flg9 = @icon_flg9,
                w2_Product.icon_term_end9 = @icon_term_end9,
                w2_Product.icon_flg10 = @icon_flg10,
                w2_Product.icon_term_end10 = @icon_term_end10,
                w2_Product.use_variation_flg = @use_variation_flg,
                w2_Product.subscription_box_flg = @subscription_box_flg,
                w2_Product.fixed_purchase_flg = @fixed_purchase_flg,
                w2_Product.fixed_purchase_product_order_limit_flg = @fixed_purchase_product_order_limit_flg,
                w2_Product.product_order_limit_flg_fp = @product_order_limit_flg_fp,
                w2_Product.member_rank_discount_flg = @member_rank_discount_flg,
                w2_Product.display_member_rank = @display_member_rank,
                w2_Product.buyable_member_rank = @buyable_member_rank,
                w2_Product.valid_flg = @valid_flg,
                w2_Product.date_changed = getdate(),
                w2_Product.last_changed = @last_changed ,
                w2_Product.google_shopping_flg = @google_shopping_flg,
                w2_Product.product_option_settings = @product_option_settings,
                w2_Product.arrival_mail_valid_flg = @arrival_mail_valid_flg,
                w2_Product.release_mail_valid_flg = @release_mail_valid_flg,
                w2_Product.resale_mail_valid_flg = @resale_mail_valid_flg,
                w2_Product.select_variation_kbn = @select_variation_kbn,
                w2_Product.brand_id1 = @brand_id1,
                w2_Product.brand_id2 = @brand_id2,
                w2_Product.brand_id3 = @brand_id3,
                w2_Product.brand_id4 = @brand_id4,
                w2_Product.brand_id5 = @brand_id5,
                w2_Product.use_recommend_flg = @use_recommend_flg,
                w2_Product.plural_shipping_price_free_flg = @plural_shipping_price_free_flg,
                w2_Product.age_limit_flg = @age_limit_flg,
                w2_Product.gift_flg = @gift_flg,
                w2_Product.digital_contents_flg = @digital_contents_flg,
                w2_Product.download_url = @download_url,
                w2_Product.display_sell_flg = @display_sell_flg,
                w2_Product.display_priority = @display_priority,
                w2_Product.limited_payment_ids = @limited_payment_ids,
                w2_Product.fixed_purchase_firsttime_price = @fixed_purchase_firsttime_price,
                w2_Product.fixed_purchase_price = @fixed_purchase_price,
                w2_Product.bundle_item_display_type = @bundle_item_display_type,
                w2_Product.product_type = @product_type,
                w2_Product.limited_fixed_purchase_kbn1_setting = @limited_fixed_purchase_kbn1_setting,
                w2_Product.limited_fixed_purchase_kbn3_setting = @limited_fixed_purchase_kbn3_setting,
                w2_Product.cooperation_id6 = @cooperation_id6,
                w2_Product.cooperation_id7 = @cooperation_id7,
                w2_Product.cooperation_id8 = @cooperation_id8,
                w2_Product.cooperation_id9 = @cooperation_id9,
                w2_Product.cooperation_id10 = @cooperation_id10,
                w2_Product.andmall_reservation_flg = @andmall_reservation_flg,
                w2_Product.tax_category_id = @tax_category_id,
                w2_Product.display_only_fixed_purchase_member_flg = @display_only_fixed_purchase_member_flg,
                w2_Product.sell_only_fixed_purchase_member_flg = @sell_only_fixed_purchase_member_flg,
                w2_Product.product_weight_gram = @product_weight_gram,
                w2_Product.fixed_purchase_cancelable_count = @fixed_purchase_cancelable_count,
                w2_Product.fixed_purchase_limited_user_level_ids = @fixed_purchase_limited_user_level_ids,
                w2_Product.fixed_purchase_next_shipping_product_id = @fixed_purchase_next_shipping_product_id,
                w2_Product.fixed_purchase_next_shipping_variation_id = @fixed_purchase_next_shipping_variation_id,
                w2_Product.fixed_purchase_next_shipping_item_quantity = @fixed_purchase_next_shipping_item_quantity,
                w2_Product.fixed_purchase_limited_skipped_count = @fixed_purchase_limited_skipped_count,
                w2_Product.next_shipping_item_fixed_purchase_kbn = @next_shipping_item_fixed_purchase_kbn,
                w2_Product.next_shipping_item_fixed_purchase_setting = @next_shipping_item_fixed_purchase_setting,
                w2_Product.product_size_factor = @product_size_factor,
                w2_Product.add_cart_url_limit_flg = @add_cart_url_limit_flg,
                w2_Product.limited_fixed_purchase_kbn4_setting = @limited_fixed_purchase_kbn4_setting,
                w2_Product.member_rank_point_exclude_flg = @member_rank_point_exclude_flg
         WHERE  w2_Product.shop_id = @shop_id
           AND  w2_Product.product_id = @product_id
      ]]>
    </Statement>
    <Parameter>
      <!-- すべて設定しても問題なし -->
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="supplier_id" Type="nvarchar" Size="20" />
      <Input Name="product_id" Type="nvarchar" Size="30" />
      <Input Name="cooperation_id1" Type="nvarchar" Size="30" />
      <Input Name="cooperation_id2" Type="nvarchar" Size="30" />
      <Input Name="cooperation_id3" Type="nvarchar" Size="30" />
      <Input Name="cooperation_id4" Type="nvarchar" Size="30" />
      <Input Name="cooperation_id5" Type="nvarchar" Size="30" />
      <Input Name="mall_ex_product_id" Type="nvarchar" Size="30" />
      <Input Name="maker_id" Type="nvarchar" Size="30" />
      <Input Name="maker_name" Type="nvarchar" Size="50" />
      <Input Name="name" Type="nvarchar" Size="100" />
      <Input Name="name_kana" Type="nvarchar" Size="100" />
      <Input Name="name2" Type="nvarchar" Size="100" />
      <Input Name="name2_kana" Type="nvarchar" Size="100" />
      <Input Name="seo_keywords" Type="nvarchar" Size="200" />
      <Input Name="catchcopy" Type="nvarchar" Size="60" />
      <Input Name="search_keyword" Type="nvarchar" Size="500" />
      <Input Name="outline_kbn" Type="nvarchar" Size="1" />
      <Input Name="outline" Type="nvarchar" Size="max" />
      <Input Name="desc_detail_kbn1" Type="nvarchar" Size="1" />
      <Input Name="desc_detail1" Type="ntext" />
      <Input Name="desc_detail_kbn2" Type="nvarchar" Size="1" />
      <Input Name="desc_detail2" Type="ntext" />
      <Input Name="desc_detail_kbn3" Type="nvarchar" Size="1" />
      <Input Name="desc_detail3" Type="ntext" />
      <Input Name="desc_detail_kbn4" Type="nvarchar" Size="1" />
      <Input Name="desc_detail4" Type="ntext" />
      <Input Name="return_exchange_message" Type="ntext" />
      <Input Name="note" Type="ntext" />
      <Input Name="display_price" Type="decimal" Size="18,3" />
      <Input Name="display_special_price" Type="decimal" Size="18,3" />
      <Input Name="tax_included_flg" Type="nvarchar" Size="1" />
      <Input Name="tax_rate" Type="int" />
      <Input Name="tax_round_type" Type="nvarchar" Size="20" />
      <Input Name="price_pretax" Type="decimal" Size="18,3" />
      <Input Name="price_shipping" Type="decimal" />
      <Input Name="shipping_type" Type="nvarchar" Size="10" />
      <Input Name="shipping_size_kbn" Type="nvarchar" Size="4" />
      <Input Name="product_color_id" Type="nvarchar" Size="50" />
      <Input Name="price_cost" Type="decimal" />
      <Input Name="kbn1" Type="nvarchar" Size="30" />
      <Input Name="kbn2" Type="nvarchar" Size="30" />
      <Input Name="kbn3" Type="nvarchar" Size="30" />
      <Input Name="kbn4" Type="nvarchar" Size="30" />
      <Input Name="kbn5" Type="nvarchar" Size="30" />
      <Input Name="point_kbn1" Type="nvarchar" Size="1" />
      <Input Name="point1" Type="decimal" />
      <Input Name="point_kbn2" Type="nvarchar" Size="1" />
      <Input Name="point2" Type="decimal" />
      <Input Name="point_kbn3" Type="nvarchar" Size="1" />
      <Input Name="point3" Type="decimal" />
      <Input Name="campaign_from" Type="datetime" />
      <Input Name="campaign_to" Type="datetime" />
      <Input Name="campaign_point_kbn" Type="nvarchar" Size="1" />
      <Input Name="campaign_point" Type="int" />
      <Input Name="display_from" Type="datetime" />
      <Input Name="display_to" Type="datetime" />
      <Input Name="sell_from" Type="datetime" />
      <Input Name="sell_to" Type="datetime" />
      <Input Name="before_sale_display_kbn" Type="nvarchar" Size="1" />
      <Input Name="after_sale_display_kbn" Type="nvarchar" Size="1" />
      <Input Name="max_sell_quantity" Type="int" />
      <Input Name="stock_management_kbn" Type="nvarchar" Size="1" />
      <Input Name="stock_message_id" Type="nvarchar" Size="30" />
      <Input Name="url" Type="nvarchar" Size="256" />
      <Input Name="inquire_email" Type="nvarchar" Size="256" />
      <Input Name="inquire_tel" Type="nvarchar" Size="30" />
      <Input Name="display_kbn" Type="nvarchar" Size="1" />
      <Input Name="category_id1" Type="nvarchar" Size="30" />
      <Input Name="category_id2" Type="nvarchar" Size="30" />
      <Input Name="category_id3" Type="nvarchar" Size="30" />
      <Input Name="category_id4" Type="nvarchar" Size="30" />
      <Input Name="category_id5" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_cs1" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_cs2" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_cs3" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_cs4" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_cs5" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_us1" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_us2" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_us3" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_us4" Type="nvarchar" Size="30" />
      <Input Name="related_product_id_us5" Type="nvarchar" Size="30" />
      <Input Name="image_head" Type="nvarchar" Size="50" />
      <Input Name="icon_flg1" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end1" Type="datetime" />
      <Input Name="icon_flg2" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end2" Type="datetime" />
      <Input Name="icon_flg3" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end3" Type="datetime" />
      <Input Name="icon_flg4" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end4" Type="datetime" />
      <Input Name="icon_flg5" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end5" Type="datetime" />
      <Input Name="icon_flg6" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end6" Type="datetime" />
      <Input Name="icon_flg7" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end7" Type="datetime" />
      <Input Name="icon_flg8" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end8" Type="datetime" />
      <Input Name="icon_flg9" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end9" Type="datetime" />
      <Input Name="icon_flg10" Type="nvarchar" Size="1" />
      <Input Name="icon_term_end10" Type="datetime" />          
      <Input Name="use_variation_flg" Type="nvarchar" Size="2" />
      <Input Name="subscription_box_flg" Type="nvarchar" Size="2" />
      <Input Name="fixed_purchase_flg" Type="nvarchar" Size="2" />
      <Input Name="fixed_purchase_product_order_limit_flg" Type="nvarchar" Size="1" />
      <Input Name="product_order_limit_flg_fp" Type="nvarchar" Size="1" />
      <Input Name="member_rank_discount_flg" Type="nvarchar" Size="1" />
      <Input Name="display_member_rank" Type="nvarchar" Size="30" />
      <Input Name="buyable_member_rank" Type="nvarchar" Size="30" />
      <Input Name="valid_flg" Type="nvarchar" Size="1" />
      <Input Name="date_created" Type="datetime" />
      <Input Name="date_changed" Type="datetime" />
      <Input Name="last_changed" Type="nvarchar" Size="20" />
      <Input Name="google_shopping_flg" Type="nvarchar" Size="1" />
      <Input Name="product_option_settings" Type="nvarchar" Size="max" />
      <Input Name="arrival_mail_valid_flg" Type="nvarchar" Size="1" />
      <Input Name="release_mail_valid_flg" Type="nvarchar" Size="1" />
      <Input Name="resale_mail_valid_flg" Type="nvarchar" Size="1" />
      <Input Name="select_variation_kbn" Type="nvarchar" Size="20" />
      <Input Name="brand_id1" Type="nvarchar" Size="30" />
      <Input Name="brand_id2" Type="nvarchar" Size="30" />
      <Input Name="brand_id3" Type="nvarchar" Size="30" />
      <Input Name="brand_id4" Type="nvarchar" Size="30" />
      <Input Name="brand_id5" Type="nvarchar" Size="30" />
      <Input Name="use_recommend_flg" Type="nvarchar" Size="1" />
      <Input Name="plural_shipping_price_free_flg" Type="nvarchar" Size="1" />
      <Input Name="gift_flg" Type="nvarchar" Size="2" />
      <Input Name="age_limit_flg" Type="nvarchar" Size="1" />
      <Input Name="digital_contents_flg" Type="nvarchar" Size="1" />
      <Input Name="download_url" Type="nvarchar" Size="max" />
      <Input Name="display_sell_flg" Type="nvarchar" Size="1" />
      <Input Name="display_priority" Type="int" />
      <Input Name="limited_payment_ids" Type="nvarchar" Size="250"/>
      <Input Name="fixed_purchase_firsttime_price" Type="decimal" Size="18,3" />
      <Input Name="fixed_purchase_price" Type="decimal" Size="18,3" />
      <Input Name="bundle_item_display_type" Type="nvarchar" Size="10" />
      <Input Name="product_type" Type="nvarchar" Size="10" />
      <Input Name="limited_fixed_purchase_kbn1_setting" Type="nvarchar" Size="200"/>
      <Input Name="limited_fixed_purchase_kbn3_setting" Type="nvarchar" Size="200"/>
      <Input Name="cooperation_id6" Type="nvarchar" Size="50" />
      <Input Name="cooperation_id7" Type="nvarchar" Size="50" />
      <Input Name="cooperation_id8" Type="nvarchar" Size="50" />
      <Input Name="cooperation_id9" Type="nvarchar" Size="50" />
      <Input Name="cooperation_id10" Type="nvarchar" Size="50" />
      <Input Name="andmall_reservation_flg" Type="nvarchar" Size="3" />
      <Input Name="display_only_fixed_purchase_member_flg" Type="nvarchar" Size="1" />
      <Input Name="sell_only_fixed_purchase_member_flg" Type="nvarchar" Size="1" />
      <Input Name="product_weight_gram" Type="int" />
      <Input Name="tax_category_id" Type="nvarchar" Size="30" />
      <Input Name="fixed_purchase_cancelable_count" Type="int" />
      <Input Name="fixed_purchase_limited_user_level_ids" Type="nvarchar" Size="200" />
      <Input Name="fixed_purchase_next_shipping_product_id" Type="nvarchar" Size="30" />
      <Input Name="fixed_purchase_next_shipping_variation_id" Type="nvarchar" Size="60" />
      <Input Name="fixed_purchase_next_shipping_item_quantity" Type="int" />
      <Input Name="fixed_purchase_limited_skipped_count" Type="int" />
      <Input Name="next_shipping_item_fixed_purchase_kbn" Type="nvarchar" Size="10" />
      <Input Name="next_shipping_item_fixed_purchase_setting" Type="nvarchar" Size="10" />
      <Input Name="product_size_factor" Type="int" />
      <Input Name="add_cart_url_limit_flg" Type="nvarchar" Size="1" />
      <Input Name="limited_fixed_purchase_kbn4_setting" Type="nvarchar" Size="50"/>
      <Input Name="member_rank_point_exclude_flg" Type="nvarchar" Size="1"/>
    </Parameter>
  </UpdateProduct>

  <!-- カテゴリID更新時の整合性保持用 -->
  <UpdateProductCategoryIds>
    <Statement>
      <![CDATA[
        UPDATE  w2_Product
           SET  w2_Product.category_id1 =
                  CASE
                    WHEN w2_Product.category_id1 LIKE @category_id_old + '%' THEN STUFF(w2_Product.category_id1, 1, LEN(@category_id_old), @category_id)
                    ELSE w2_Product.category_id1
                  END,
                w2_Product.category_id2 =
                  CASE
                    WHEN w2_Product.category_id2 LIKE @category_id_old + '%' THEN STUFF(w2_Product.category_id2, 1, LEN(@category_id_old), @category_id)
                    ELSE w2_Product.category_id2
                  END,
                w2_Product.category_id3 =
                  CASE
                    WHEN w2_Product.category_id3 LIKE @category_id_old + '%' THEN STUFF(w2_Product.category_id3, 1, LEN(@category_id_old), @category_id)
                    ELSE w2_Product.category_id3
                  END,
                w2_Product.category_id4 =
                  CASE
                    WHEN w2_Product.category_id4 LIKE @category_id_old + '%' THEN STUFF(w2_Product.category_id4, 1, LEN(@category_id_old), @category_id)
                    ELSE w2_Product.category_id4
                  END,
                w2_Product.category_id5 =
                  CASE
                    WHEN w2_Product.category_id5 LIKE @category_id_old + '%' THEN STUFF(w2_Product.category_id5, 1, LEN(@category_id_old), @category_id)
                    ELSE w2_Product.category_id5
                  END
         WHERE  w2_Product.category_id1 LIKE @category_id_old + '%'
                OR
                w2_Product.category_id2 LIKE @category_id_old + '%'
                OR
                w2_Product.category_id3 LIKE @category_id_old + '%'
                OR
                w2_Product.category_id4 LIKE @category_id_old + '%'
                OR
                w2_Product.category_id5 LIKE @category_id_old + '%'
      ]]>
    </Statement>
    <Parameter>
      <Input Name="category_id" Type="nvarchar" Size="30" />
      <Input Name="category_id_old" Type="nvarchar" Size="30" />
    </Parameter>
  </UpdateProductCategoryIds>

  <!-- 商品情報削除 -->
  <DeleteProduct>
    <Statement>
      <![CDATA[
        DELETE  w2_Product 
         WHERE  w2_Product.shop_id = @shop_id 
           AND  w2_Product.product_id = @product_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="product_id" Type="nvarchar" Size="30" />
    </Parameter>
  </DeleteProduct>

  <!-- 重複チェック（商品情報登録時） -->
  <CheckDuplicationInsertProductId>
    <Statement>
      <![CDATA[
        SELECT  COUNT(product_id) AS product_count 
          FROM  w2_Product 
         WHERE  w2_Product.shop_id = @shop_id 
           AND  w2_Product.product_id = @product_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="product_id" Type="nvarchar" Size="30" />
    </Parameter>
  </CheckDuplicationInsertProductId>

  <!-- 重複チェック（商品情報更新時） -->
  <CheckDuplicationUpdateProductId>
    <Statement>
      <![CDATA[
        SELECT  COUNT(product_id) AS product_count 
          FROM  w2_Product 
         WHERE  w2_Product.shop_id = @shop_id 
           AND  w2_Product.product_id = @product_id
           AND  w2_Product.product_id != @product_id_old
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="product_id" Type="nvarchar" Size="30" />
      <Input Name="product_id_old" Type="nvarchar" Size="30" />
    </Parameter>
  </CheckDuplicationUpdateProductId>

  <!-- 商品情報を取得 -->
  <GetProductVariation>
    <Statement>
      <![CDATA[
        SELECT  TOP 1
                w2_ProductView.*,
                [[ MEMBER_RANK_PRICE_PRODUCTVARIATION ]]
          FROM  w2_ProductView
         WHERE  w2_ProductView.shop_id = @shop_id
           AND  w2_ProductView.product_id = @product_id
           AND  w2_ProductView.variation_id = @variation_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="product_id" Type="nvarchar" Size="30" />
      <Input Name="variation_id" Type="nvarchar" Size="60" />
      <Input Name="member_rank_id" Type="nvarchar" Size="30" />
    </Parameter>
  </GetProductVariation>

  <!-- 商品存在かどうかチェックする -->
  <CheckValidProduct>
    <Statement>
      <![CDATA[
      SELECT  COUNT(*) AS count_row
            FROM  w2_ProductView
           WHERE  w2_ProductView.shop_id = @shop_id
              AND w2_ProductView.product_id = @product_id
              AND w2_ProductView.variation_id = @product_id + @variation_id
              AND w2_ProductView.valid_flg = '1'
              AND w2_ProductView.del_flg = '0'
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="product_id" Type="nvarchar" Size="30" />
      <Input Name="variation_id" Type="nvarchar" Size="60" />
    </Parameter>
  </CheckValidProduct>
</Product>
