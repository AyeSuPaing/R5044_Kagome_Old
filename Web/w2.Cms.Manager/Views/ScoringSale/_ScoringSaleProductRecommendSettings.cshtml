@*
=========================================================================================================
  Module      : Scoring Sale Product Recommend Settings (Partial View) (_ScoringSaleProductRecommendSettings.cshtml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2022 All Rights Reserved.
=========================================================================================================
*@
@using w2.App.Common.Web.Page

<div class="feature-page-elements" style="background-color: white;">
	<div class="feature-page-element-head" style="padding: 15px 20px; border-bottom: none;">
		<div class="feature-page-element" style="border: none; width: 100%">
			<div class="feature-selected-item-list" style="margin-bottom: 30px; border-top:none;" data-bind="visible: ($data.ProductRecommendConditions().length > 0)">
				<div style="overflow: visible;" class="feature-page-elements" data-bind="foreach: ProductRecommendConditions">
					<div class="feature-page-element scoringsale-page-element" style="border: none; border-top: solid #bababa 1px; border-radius: 0px; margin-bottom: 0px;" data-bind="attr: { 'data-condition-index': $index() }">
						<div class="feature-selected-item-list-item list-row" style="display: table; flex-wrap: wrap;" onMouseOver="this.style.background='white'">
							<div class="feature-page-element-head" style="display: block; border-bottom: none;">
								<div class="feature-area-banner-sort-btns" style="padding-top: 8px; position: absolute; right: 30px;">
									<div class="feature-area-banner-sort-btn feature-page-element-sort-btn-up btn btn-sub btn-size-s" data-type="ProductRecommendCondition" data-bind="attr : { style : ((view_model.ProductRecommendConditionsLength() == ($index() + 1)) ? 'margin-right: 15px;' : '') + 'padding: 2.5px 12px; position: relative; right: 20px;' }">
										<span class="icon-arrow2-down"></span>
									</div>
									<div class="feature-area-banner-sort-btn feature-page-element-sort-btn-down btn btn-sub btn-size-s" data-type="ProductRecommendCondition" data-bind="visible: (view_model.ProductRecommendConditionsLength() != ($index() + 1))" style="padding: 2.5px 12px; margin-right: 15px; position: relative; right: 20px;">
										<span class="icon-arrow2-down"></span>
									</div>
									<div style="width: 10%; cursor: pointer; position: relative; right: 10px; top:5px" data-bind="visible: (view_model.ProductRecommendConditionsLength() > 1)">
										<span class="icon icon-close" style="font-size: 25px;" data-bind="click: function(data, event) { scoring_sale_list_page.remove_product_recommend_setting_page(data, event); }"></span>
									</div>
								</div>
								<div class="feature-page-element-head-left set_name" >
									<div class="form-element-group-title" style="width: 180px;">
										<label>@CommonPage.ReplaceTag("@@ScoringSale.recommended_products_text.name@@")<span class="notice">*</span></label>
									</div>
									<div style="padding-top: 5px;">
										<a href="javascript:void(0);" data-bind="click: function (data){ scoring_sale_list_page.product_recommend_modify('productRecommendCondition', data)} " class="btn btn-main btn-size-m">
											<div>@CommonPage.ReplaceTag("@@ScoringSale.display_button_attribute_text.product_setting.name@@")</div>
										</a>
									</div>
									<div class="feature-item-list" style="margin-left: 0px; width: 80%; padding-left: 20px;">
										<div class="form-element-group form-element-group-vertical">
											<div class="form-element-group-content">
												<div class="feature-selected-item-list"  style="border: none;">
													<div style="overflow: auto;" class="feature-selected-item-list-body ui-sortable">
														<div class="feature-selected-item-list-item list-row" data-bind="attr : { variationid : $data.VariationId }" onMouseOver="this.style.background='white'">
															<div style="width: 15%; padding: 10px 15px 10px 10px">
																<img data-bind="attr : { alt : $data.ProductName, src : $data.ImageUrl } ">
															</div>
															<div style="width: 85%">
																<div style="display: table; word-break: break-all;">
																	<div style="display: table-row;">
																		<span style="display: table-cell;" data-bind="text : $data.ProductId" ></span>
																		<span style="display: table-cell; padding: 5px;" data-bind="text : $data.ProductName" ></span>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="feature-page-element-head" style="justify-content: flex-start; border: none; padding-left: 10px;">
								<div class="feature-page-element-head-left set_name" style="padding-left: 15px;">
									<div class="form-element-group-title" style="width: 120px;">
										<label>@CommonPage.ReplaceTag("@@ScoringSale.condition_text.name@@")<span class="notice">*</span></label>
									</div>
								</div>
							</div>
							<div class="feature-page-elements" style="background-color: white; width: 85%; margin:0 0 30px 85px;">
								<div class="feature-page-element" style="border: none;">
									<div class="feature-page-element-content">
										<div class="feature-item-list">
											<div class="form-element-group form-element-group-vertical">
												<div class="form-element-group-content">
													<table class="detail_table" border="0" cellspacing="1" cellpadding="3">
														<tbody>
															<tr>
																<td align="left" class="search_title_bg" width="695">
																	<input type="button" value="@CommonPage.ReplaceTag("@@ScoringSale.display_button_attribute_text.group.name@@")" class="btn btn-main btn-size-m" data-bind="enable: (scoring_sale_list_page.check_show($data)), click: scoring_sale_list_page.make_group">
																</td>
																<td align="center" class="search_title_bg" width="63">
																	<input type="submit" class="btn btn-main btn-size-m" value="@CommonPage.ReplaceTag("@@ScoringSale.display_button_attribute_text.add.name@@")" data-bind="click: scoring_sale_list_page.add_condition">
																</td>
															</tr>
														<!--ko foreach: { data: $data.Conditions, as: 'condition' } -->
															<!--ko if: ($index() != 0)-->
															<tr>
																<td colspan="2" align="left" class="search_item_bg" data-bind="class: (condition.IsGroup && (condition.GroupBrandNo != 1)) ? 'group_item' : '', attr:{style: (condition.IsGroup && (condition.GroupBrandNo != 1)) ? 'box-shadow: inset 2em 0em #cccccc; padding-left: 30px;' : ''}">
																	<select name="ddlConditionType"
																		style="height:30px;"
																		data-bind="visible : scoring_sale_list_page.display_condition_type($parent, condition, $index()),
																			options: view_model.ConditionType,
																			optionsText: 'text',
																			optionsValue: 'value',
																			value: (condition.IsGroup && (condition.GroupBrandNo != 1)) ? $parent.ConditionTypeGroup : $parent.ConditionTypeNonGroup,
																			event : {change: function(data, event) {scoring_sale_list_page.condition_type_change($parent, data, event);}}">
																	</select>
																	<span style="font-size: 125%;" data-bind=" html: scoring_sale_list_page.condition_text($parent, condition, $index()) ">
																	</span>
																	<span style="padding: 0px 20px 0px 20px;" data-bind="visible: ((condition.GroupBrandNo == 2) && condition.IsGroup)">
																		<input type="button"
																			name="btnCancelGroup"
																			value="@CommonPage.ReplaceTag("@@ScoringSale.display_button_attribute_text.ungroup.name@@")"
																			class="btn btn-main btn-size-m"
																			data-bind="click: function(){ scoring_sale_list_page.cancel_group($parent, condition)}">
																	</span>
																</td>
															</tr>
															<!--/ko-->
															<tr>
																<td align="left"
																	class="search_item_bg"
																	data-bind = "class: condition.IsGroup ? 'group_item' : '', attr: { style: condition.IsGroup ? 'box-shadow: inset 2em 0em #cccccc; padding-left:30px' : '', colspan: ($parent.Conditions().length == 1) ? '2' : '0' }" >
																	<span class="cb_count">
																		<input type="checkbox" name="cbGroupItem" data-bind="visible: (condition.IsGroup == false), checked: condition.IsGroupChecked, event: { change: function () {set_group_item($parent, condition)} }"></span>
																	<input type="hidden" name="hfGroupConditionType">
																	<input type="hidden" name="hfGroupNo" data-bind =" value: condition.GroupNo ">
																	<select style="height: 30px;" data-bind=" options: view_model.ScoreAxisAxisNoList, optionsText: 'Text', optionsValue: 'Value', value: condition.ScoreAxisAxisNo"></select>
																	<select style="height: 30px; width: 25%;" data-bind="options: view_model.ValueType, optionsText: 'text', optionsValue: 'value', value: condition.ValueCondition, event: { change: valueConditionChange } "></select>
																	<span id="spanInputCondition" data-bind="visible: (condition.ValueCondition() != 'VALUE_MAX')">
																		<input type="hidden" name="hfDataType" id="hfDataType" value="price" style="width:20%">
																		<span id="spanInputConditionDetail">
																			@CommonPage.ReplaceTag("@@ScoringSale.but_text.name@@")
																			<input name="tbValue1" type="text" style="width: 15%;" maxlength="9" data-bind ="textInput: condition.ScoreAxisAxisValueFrom">
																			@CommonPage.ReplaceTag("@@ScoringSale.score_axis_axis_value_from.name@@")
																			<input name="tbValue1" type="text" style="width: 15%;" maxlength="9" data-bind ="textInput: condition.ScoreAxisAxisValueTo">
																			@CommonPage.ReplaceTag("@@ScoringSale.score_axis_axis_value_to.name@@")
																		</span>
																	</span>
																</td>
																<td align="center" class="search_title_bg"
																	data-bind = "visible: $parent.Conditions().length > 1" >
																	<input
																		type="submit"
																		class="btn btn-main btn-size-m"
																		value="@CommonPage.ReplaceTag("@@ScoringSale.display_button_attribute_text.delete.name@@")"
																		data-bind=" click: function(data) { scoring_sale_list_page.remove_condition($parent, data)}, visible: ($parent.Conditions().length > 1)">
																</td>
															</tr>
														<!--/ko-->
														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="feature-item-list-btn">
				<a href="javascript:javascript:scoring_sale_list_page.add_product_recommend_setting_page();" class="btn btn-sub btn-size-m">@CommonPage.ReplaceTag("@@ScoringSale.display_button_attribute_text.add_recommended_product_condition_setting.name@@")</a>
			</div>
			<div style="width: 38%; text-align:left;margin-top: 30px;">
				<h4 style="margin: 0 0 10px 10px;">@CommonPage.ReplaceTag("@@ScoringSale.out_of_condition_applicable_goods_text.name@@")</h4>
			</div>
			<div class="feature-selected-item-list-item list-row" style="flex-wrap: wrap; border: solid #999 1px; " onMouseOver="this.style.background='white'">
				<div class="feature-page-element-head" style="display: block; border-bottom: none; width: 100%;">
					<div class="feature-page-element-head-left set_name">
						<div class="form-element-group-title" style="width: 180px; min-width: 140px;">
							<label>@CommonPage.ReplaceTag("@@ScoringSale.recommended_products_text.name@@")<span class="notice">*</span></label>
						</div>
						<div style="padding-top: 5px;">
							<div class="feature-item-list-btn">
								<a href="javascript:void(0);" data-bind="click: function(data, event) { scoring_sale_list_page.product_recommend_modify('productRecommend',data, event)} " class="btn btn-main btn-size-m">@CommonPage.ReplaceTag("@@ScoringSale.display_button_attribute_text.product_setting.name@@")</a>
							</div>
						</div>
						<div class="feature-item-list" style="margin-left: 0px; width: 80%; padding-left: 20px;">
							<div class="form-element-group form-element-group-vertical">
								<div class="form-element-group-content">
									<div class="feature-selected-item-list"  style="border: none;">
										<div style="overflow: visible;" class="feature-selected-item-list-body ui-sortable">
											<div class="feature-selected-item-list-item list-row" data-bind="attr: { variationid: ProductRecommend().VariationId }" onMouseOver="this.style.background='white'">
												<div style="width: 15%; padding: 10px 15px 10px 10px">
													<img data-bind="attr: {src: ProductRecommend().ImageUrl}">
												</div>
												<div style="width: 85%">
													<div style="display: table; word-break: break-all;">
														<div style="display: table-row;">
															<span style="display: table-cell;" data-bind="text: ProductRecommend().ProductId"></span>
															<span style="display: table-cell; padding: 5px;" data-bind="text: ProductRecommend().ProductName"></span>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
