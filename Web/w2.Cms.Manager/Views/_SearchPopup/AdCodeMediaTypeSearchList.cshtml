@*
=========================================================================================================
  Module      : 広告媒体区分 検索ポップアップウィンドウ(AdvertisementCodeMediaTypeSearchList.cshtml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2019 All Rights Reserved.
=========================================================================================================
*@

@model w2.Cms.Manager.ViewModels.SearchPopup.AdCodeMediaTypeSearchListViewModel
@using w2.Cms.Manager.Codes
@{
	ViewBag.Title = "広告媒体区分 検索";
	Layout = Constants.POPUP_LAYOUT_PATH_DEFAULT;
}

<table cellspacing="0" cellpadding="0" width="791" border="0">
	<!--▽ 検索 ▽-->
	<tr>
	<td>
	<table class="box_border" cellspacing="1" cellpadding="3" width="784" border="0">
	<tr>
	<td class="search_box_bg">
		@using (Html.BeginForm("AdCodeMediaTypeSearchList", w2.App.Common.Constants.CONTROLLER_W2CMS_MANAGER_SEARCH_POPUP, FormMethod.Get))
		{
			<table cellspacing="0" cellpadding="0" width="100%" border="0">
			<tr>
			<td align="center">
			<table cellspacing="0" cellpadding="0" border="0">
				@LayoutHelper.PaddingTr(10)
				<tr>
					<td class="search_box">
						<table class="search_table" cellspacing="1" cellpadding="2" width="758" border="0">
							<tr>
								<td class="search_title_bg" width="80">
									区分ID
								</td>
								<td class="search_item_bg" width="130">
									@Html.TextBoxFor(model => model.ParamModel.AdvCodeMediaTypeId, new { Name = "AdvCodeMediaTypeId" })
								</td>
								<td class="search_title_bg" width="80">
									区分名</td>
								<td class="search_item_bg" width="100">
									@Html.TextBoxFor(model => model.ParamModel.AdvCodeMediaTypeName, new { Name = "AdvCodeMediaTypeName" })
								</td>
								<td class="search_title_bg" width="80">
									並び順</td>
								<td class="search_item_bg" width="110">
									@Html.DropDownListFor(model => model.ParamModel.SortKbn, Model.SortKbnItems, new { Name = "SortKbn" })
								</td>
								<td class="search_btn_bg" width="80" rowspan="2">
									<div class="search_btn_main">
										<input type="submit" name="search" value="  検索  " class="btn btn-main"/>
									</div>
									<div class="search_btn_sub">
										@Html.ActionLink("クリア", "AdCodeMediaTypeSearchList", w2.App.Common.Constants.CONTROLLER_W2CMS_MANAGER_SEARCH_POPUP)
									</div>
								</td>
							</tr>
						</table>
					</td>
				</tr>
				@LayoutHelper.PaddingTr(10)
			</table>
			</td>
			</tr>
			</table>
		}
	</td>
	</tr>
	</table>
	</td>
	</tr>
	<!--△ 検索 △-->
	@LayoutHelper.PaddingTr(10)
	<!--▽ 一覧 ▽-->
	<tr>
		<td>
			<h2 class="cmn-hed-h2">広告媒体区分情報一覧</h2>
		</td>
	</tr>
	<tr>
	<td>
	<table class="box_border" cellspacing="1" cellpadding="0" width="784" border="0">
	<tr>
	<td>
	<table class="list_box_bg" cellspacing="0" cellpadding="0" width="100%" border="0">
	<tr>
	<td align="center">
		<table cellspacing="0" cellpadding="0" border="0">
			@LayoutHelper.PaddingTr(6)
			<tr>
				<td>
					<!--▽ ページング ▽-->
					<table class="list_pager" cellspacing="0" cellpadding="0" width="758" border="0">
						<tr>
							<td>
								@Html.Raw(Model.PagerHtml)
							</td>
						</tr>
					</table>
					<!-- ページング-->
				</td>
			</tr>
			@LayoutHelper.PaddingTr(4)
			<tr>
				<td>
					<table class="list_table" cellspacing="1" cellpadding="3" width="758" border="0">
						<tr class="list_title_bg">
							<td align="center" width="250">区分ID</td>
							<td align="center" width="342">区分名</td>
						</tr>
						@{ var lineNo = 1; }
						@foreach (var resultModel in Model.AdCodeMediaTypeSearchResultListViewModel)
						{
							lineNo = (lineNo + 1) % 2;
							var listItemBgClass = "list_item_bg" + (lineNo + 1).ToString();
							var listSelectMoutClass = string.Format("listselect_mout{0}(this)", (lineNo + 1).ToString());
							<tr class="@listItemBgClass"
								onmouseover="listselect_mover(this)"
								onmouseout="@listSelectMoutClass"
								onmousedown="listselect_mdown(this)"
								onclick="javascript:setAdvcodeMediaType('@resultModel.AdvcodeMediaTypeId', '@resultModel.AdvcodeMediaTypeName')">
								<td align="left">@resultModel.AdvcodeMediaTypeId</td>
								<td align="left">@resultModel.AdvcodeMediaTypeName</td>
							</tr>
						}
						@if (string.IsNullOrEmpty(Model.ErrorMessage) == false)
						{
							<tr class="list_alert">
								<td colspan="4">@Model.ErrorMessage</td>
							</tr>
						}
					</table>
				</td>
			</tr>
			@LayoutHelper.PaddingTr(6)
		</table>
	</td>
	</tr>
	</table>
	</td>
	</tr>
	</table>
	</td>
	</tr>
	<!--△ 一覧 △-->
</table>

@section JavaScript
{
	<script type="text/javascript">
		// 選択された広告媒体区分IDを設定
		function setAdvcodeMediaType(advcodeMediaTypeId, advcodeMediaTypeName) {
			// 親ウィンドウが存在する場合
			if (window.opener != null) {
				window.focus();
				// 選択された広告媒体区分IDを設定
				window.opener.setAdvcodeMediaType(advcodeMediaTypeId);
				// アラートを表示する
				notification.show(advcodeMediaTypeId + ':' + advcodeMediaTypeName + 'が追加されました！', 'info', 'fadeout');
			}
		}
	</script>
}
