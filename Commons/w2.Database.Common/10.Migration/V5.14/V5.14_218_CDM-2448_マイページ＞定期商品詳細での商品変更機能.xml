<?xml version="1.0" encoding="utf-8" ?>
<Migration>
  <Up>
    <Statement>
      <![CDATA[
      IF NOT EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id(N'[dbo].[w2_FixedPurchaseProductChangeSetting]'))
        BEGIN
          CREATE TABLE [dbo].[w2_FixedPurchaseProductChangeSetting] (
            [fixed_purchase_product_change_id] [nvarchar](50) NOT NULL DEFAULT (N''),
            [fixed_purchase_product_change_name] [nvarchar](100) NOT NULL DEFAULT (N''),
            [priority] [int] NOT NULL DEFAULT (1),
            [valid_flg] [nvarchar](1) NOT NULL DEFAULT (N'1'),
            [date_created] [datetime] NOT NULL DEFAULT (GETDATE()),
            [date_changed] [datetime] NOT NULL DEFAULT (GETDATE()),
            [last_changed] [nvarchar](20) NOT NULL DEFAULT (N'')
          ) ON [PRIMARY]

          ALTER TABLE [dbo].[w2_FixedPurchaseProductChangeSetting] WITH NOCHECK ADD
            CONSTRAINT [PK_w2_FixedPurchaseProductChangeSetting] PRIMARY KEY  CLUSTERED
            (
              [fixed_purchase_product_change_id]
            ) ON [PRIMARY]
        END

      IF NOT EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id(N'[dbo].[w2_FixedPurchaseBeforeChangeItem]'))
        BEGIN
          CREATE TABLE [dbo].[w2_FixedPurchaseBeforeChangeItem] (
            [fixed_purchase_product_change_id] [nvarchar](50) NOT NULL DEFAULT (N''),
            [item_unit_type] [nvarchar](30) NOT NULL DEFAULT (N'PRODUCT'),
            [shop_id] [nvarchar](10) NOT NULL DEFAULT (N''),
            [product_id] [nvarchar](30) NOT NULL DEFAULT (N''),
            [variation_id] [nvarchar](60) NOT NULL DEFAULT (N''),
            [date_created] [datetime] NOT NULL DEFAULT (GETDATE()),
            [date_changed] [datetime] NOT NULL DEFAULT (GETDATE()),
            [last_changed] [nvarchar](20) NOT NULL DEFAULT (N'')
            ) ON [PRIMARY]

          ALTER TABLE [dbo].[w2_FixedPurchaseBeforeChangeItem] WITH NOCHECK ADD
            CONSTRAINT [PK_w2_FixedPurchaseBeforeChangeItem] PRIMARY KEY  CLUSTERED
            (
              [fixed_purchase_product_change_id],
              [shop_id],
              [product_id],
              [variation_id]
            ) ON [PRIMARY]
        END

        IF NOT EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id(N'[dbo].[w2_FixedPurchaseAfterChangeItem]'))
        BEGIN
          CREATE TABLE [dbo].[w2_FixedPurchaseAfterChangeItem] (
            [fixed_purchase_product_change_id] [nvarchar](50) NOT NULL DEFAULT (N''),
            [item_unit_type] [nvarchar](30) NOT NULL DEFAULT (N'PRODUCT'),
            [shop_id] [nvarchar](10) NOT NULL DEFAULT (N''),
            [product_id] [nvarchar](30) NOT NULL DEFAULT (N''),
            [variation_id] [nvarchar](60) NOT NULL DEFAULT (N''),
            [date_created] [datetime] NOT NULL DEFAULT (GETDATE()),
            [date_changed] [datetime] NOT NULL DEFAULT (GETDATE()),
            [last_changed] [nvarchar](20) NOT NULL DEFAULT (N'')
            ) ON [PRIMARY]

          ALTER TABLE [dbo].[w2_FixedPurchaseAfterChangeItem] WITH NOCHECK ADD
            CONSTRAINT [PK_w2_FixedPurchaseAfterChangeItem] PRIMARY KEY  CLUSTERED
            (
              [fixed_purchase_product_change_id],
              [shop_id],
              [product_id],
              [variation_id]
            ) ON [PRIMARY]
        END
    ]]>
    </Statement>
  </Up>
</Migration>
