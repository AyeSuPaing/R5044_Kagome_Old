<?xml version="1.0" encoding="utf-8"?>
<!--
=========================================================================================================
  Module      : メール配信　配信先テンポラリテーブル系SQLステートメントXML (MailSendTemp.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2020 All Rights Reserved.
=========================================================================================================
-->
<MailSendTemp>

  <!-- 取得 -->
  <Get>
    <Statement>
      <![CDATA[
        SELECT  *
          FROM  w2_MailSendTemp
         WHERE  dept_id = @dept_id
           AND  master_id = @master_id
           AND  data_no = @data_no
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="master_id" Type="nvarchar" Size="10" />
      <Input Name="data_no" Type="bigint" />
    </Parameter>
  </Get>

  <!-- 登録 -->
  <Insert>
    <Statement>
      <![CDATA[
        INSERT  w2_MailSendTemp
                (
                  dept_id
                  ,master_id
                  ,data_no
                  ,user_id
                  ,mail_addr
                  ,mail_addr_kbn
                  ,date_created
                )
        VALUES  (
                  @dept_id
                  ,@master_id
                  ,@data_no
                  ,@user_id
                  ,@mail_addr
                  ,@mail_addr_kbn
                  ,GETDATE()
                )
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="master_id" Type="nvarchar" Size="10" />
      <Input Name="data_no" Type="bigint" />
      <Input Name="user_id" Type="nvarchar" Size="30" />
      <Input Name="mail_addr" Type="nvarchar" Size="256" />
      <Input Name="mail_addr_kbn" Type="nvarchar" Size="10" />
    </Parameter>
  </Insert>

  <!-- 削除 -->
  <Delete>
    <Statement>
      <![CDATA[
        DELETE  w2_MailSendTemp
         WHERE  dept_id = @dept_id
           AND  master_id = @master_id
           AND  data_no = @data_no
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="master_id" Type="nvarchar" Size="10" />
      <Input Name="data_no" Type="bigint" />
    </Parameter>
  </Delete>

  <!-- 対象マスターIDのリストを全て削除 -->
  <DeleteAll>
    <Statement>
      <![CDATA[
        DELETE  w2_MailSendTemp
         WHERE  dept_id = @dept_id
           AND  master_id = @master_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="master_id" Type="nvarchar" Size="30" />
    </Parameter>
  </DeleteAll>

</MailSendTemp>