<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : 受注ワークフローシナリオ設定系SQLステートメントXML (OrderWorkflowScenarioSetting.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2019 All Rights Reserved.
=========================================================================================================
-->
<OrderWorkflowScenarioSetting>
  
  <!-- 取得 -->
  <Get>
    <Statement>
      <![CDATA[
        SELECT  *
          FROM  w2_OrderWorkflowScenarioSetting
         WHERE  scenario_setting_id = @scenario_setting_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="scenario_setting_id" Type="nvarchar" Size="30" />
    </Parameter>
  </Get>

  <!-- 受注ワークフロー設定PKで取得 -->
  <GetByOrderworkflowSettingPrimaryKey>
    <Statement>
      <![CDATA[
        SELECT  *
          FROM  w2_OrderWorkflowScenarioSettingItem
         WHERE  shop_id = @shop_id
           AND  workflow_kbn = @workflow_kbn
           AND  workflow_no = @workflow_no
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="30" />
      <Input Name="workflow_kbn" Type="nvarchar" Size="30" />
      <Input Name="workflow_no" Type="int" Size="30" />
    </Parameter>
  </GetByOrderworkflowSettingPrimaryKey>

  <!-- 取得 -->
  <GetAll>
    <Statement>
      <![CDATA[
        SELECT  *
          FROM  w2_OrderWorkflowScenarioSetting
      ]]>
    </Statement>
    <Parameter>
      <Input Name="scenario_setting_id" Type="nvarchar" Size="30" />
    </Parameter>
  </GetAll>

  <!-- アイテムを取得 -->
  <GetItems>
    <Statement>
      <![CDATA[
        SELECT  *
          FROM  w2_OrderWorkflowScenarioSettingItem
         WHERE  scenario_setting_id = @scenario_setting_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="scenario_setting_id" Type="nvarchar" Size="30" />
    </Parameter>
  </GetItems>
  
  <!-- 登録 -->
  <Insert>
    <Statement>
      <![CDATA[
        INSERT  w2_OrderWorkflowScenarioSetting
                (
                  scenario_setting_id
                  ,scenario_name
                  ,exec_timing
                  ,schedule_kbn
                  ,schedule_day_of_week
                  ,schedule_year
                  ,schedule_month
                  ,schedule_day
                  ,schedule_hour
                  ,schedule_minute
                  ,schedule_second
                  ,valid_flg
                  ,date_created
                  ,date_changed
                  ,last_changed
                )
        VALUES  (
                  @scenario_setting_id
                  ,@scenario_name
                  ,@exec_timing
                  ,@schedule_kbn
                  ,@schedule_day_of_week
                  ,@schedule_year
                  ,@schedule_month
                  ,@schedule_day
                  ,@schedule_hour
                  ,@schedule_minute
                  ,@schedule_second
                  ,@valid_flg
                  ,GETDATE()
                  ,GETDATE()
                  ,@last_changed
                )
      ]]>
    </Statement>
    <Parameter>
      <Input Name="scenario_setting_id" Type="nvarchar" Size="30" />
      <Input Name="scenario_name" Type="nvarchar" Size="50" />
      <Input Name="exec_timing" Type="nvarchar" Size="10" />
      <Input Name="schedule_kbn" Type="nvarchar" Size="10" />
      <Input Name="schedule_day_of_week" Type="nvarchar" Size="10" />
      <Input Name="schedule_year" Type="int" />
      <Input Name="schedule_month" Type="int" />
      <Input Name="schedule_day" Type="int" />
      <Input Name="schedule_hour" Type="int" />
      <Input Name="schedule_minute" Type="int" />
      <Input Name="schedule_second" Type="int" />
      <Input Name="valid_flg" Type="nvarchar" Size="10" />
      <Input Name="last_changed" Type="nvarchar" Size="20" />
    </Parameter>
  </Insert>

  <!-- アイテム登録 -->
  <InsertItem>
    <Statement>
      <![CDATA[
        INSERT  w2_OrderWorkflowScenarioSettingItem
                (
                  scenario_setting_id
                  ,scenario_no
                  ,shop_id
                  ,workflow_kbn
                  ,workflow_no
                  ,target_workflow_kbn
                )
        VALUES  (
                  @scenario_setting_id
                  ,@scenario_no
                  ,@shop_id
                  ,@workflow_kbn
                  ,@workflow_no
                  ,@target_workflow_kbn
                )
      ]]>
    </Statement>
    <Parameter>
      <Input Name="scenario_setting_id" Type="nvarchar" Size="30" />
      <Input Name="scenario_no" Type="int" />
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="workflow_kbn" Type="nvarchar" Size="10" />
      <Input Name="workflow_no" Type="int" />
      <Input Name="target_workflow_kbn" Type="nvarchar" Size="20" />
    </Parameter>
  </InsertItem>

  <!-- 更新 -->
  <Update>
    <Statement>
      <![CDATA[
        UPDATE  w2_OrderWorkflowScenarioSetting
           SET  scenario_name = @scenario_name
                ,exec_timing = @exec_timing
                ,schedule_kbn = @schedule_kbn
                ,schedule_day_of_week = @schedule_day_of_week
                ,schedule_year = @schedule_year
                ,schedule_month = @schedule_month
                ,schedule_day = @schedule_day
                ,schedule_hour = @schedule_hour
                ,schedule_minute = @schedule_minute
                ,schedule_second = @schedule_second
                ,valid_flg = @valid_flg
                ,date_changed = GETDATE()
                ,last_changed = @last_changed
         WHERE  scenario_setting_id = @scenario_setting_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="scenario_setting_id" Type="nvarchar" Size="30" />
      <Input Name="scenario_name" Type="nvarchar" Size="50" />
      <Input Name="exec_timing" Type="nvarchar" Size="10" />
      <Input Name="schedule_kbn" Type="nvarchar" Size="10" />
      <Input Name="schedule_day_of_week" Type="nvarchar" Size="10" />
      <Input Name="schedule_year" Type="int" />
      <Input Name="schedule_month" Type="int" />
      <Input Name="schedule_day" Type="int" />
      <Input Name="schedule_hour" Type="int" />
      <Input Name="schedule_minute" Type="int" />
      <Input Name="schedule_second" Type="int" />
      <Input Name="valid_flg" Type="nvarchar" Size="10" />
      <Input Name="last_changed" Type="nvarchar" Size="20" />
    </Parameter>
  </Update>

  <!-- アイテム更新 -->
  <UpdateItem>
    <Statement>
      <![CDATA[
        UPDATE  w2_OrderWorkflowScenarioSettingItem
           SET  shop_id = @shop_id
                ,workflow_kbn = @workflow_kbn
                ,workflow_no = @workflow_no
         WHERE  scenario_setting_id = @scenario_setting_id
           AND  scenario_no = @scenario_no
      ]]>
    </Statement>
    <Parameter>
      <Input Name="scenario_setting_id" Type="nvarchar" Size="30" />
      <Input Name="scenario_no" Type="int" />
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="workflow_kbn" Type="nvarchar" Size="10" />
      <Input Name="workflow_no" Type="int" />
    </Parameter>
  </UpdateItem>
  
  <!-- 削除 -->
  <Delete>
    <Statement>
      <![CDATA[
        DELETE  w2_OrderWorkflowScenarioSetting
         WHERE  scenario_setting_id = @scenario_setting_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="scenario_setting_id" Type="nvarchar" Size="30" />
    </Parameter>
  </Delete>

  <!-- アイテム削除 -->
  <DeleteItems>
    <Statement>
      <![CDATA[
        DELETE  w2_OrderWorkflowScenarioSettingItem
         WHERE  scenario_setting_id = @scenario_setting_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="scenario_setting_id" Type="nvarchar" Size="30" />
    </Parameter>
  </DeleteItems>

</OrderWorkflowScenarioSetting>
