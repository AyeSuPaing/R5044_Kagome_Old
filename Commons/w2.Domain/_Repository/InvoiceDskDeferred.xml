<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : DSK後払い請求書系SQLステートメントXML (InvoiceDskDeferred.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2021 All Rights Reserved.
=========================================================================================================
-->
<InvoiceDskDeferred>

  <!-- 取得 -->
  <Get>
    <Statement>
      <![CDATA[
        SELECT  *
          FROM  w2_InvoiceDskDeferred
          INNER JOIN w2_InvoiceDskDeferredDetail WITH(NOLOCK) ON
                (
                  w2_InvoiceDskDeferredDetail.order_id = w2_InvoiceDskDeferredDetail.order_id
                )
         WHERE  w2_InvoiceDskDeferred.order_id = @order_id
         ORDER  BY w2_InvoiceDskDeferredDetail.detail_no
      ]]>
    </Statement>
    <Parameter>
      <Input Name="order_id" Type="nvarchar" Size="30" />
    </Parameter>
  </Get>

  <!-- 登録 -->
  <Insert>
    <Statement>
      <![CDATA[
        INSERT  w2_InvoiceDskDeferred
                (
                  order_id
                  ,invoice_bar_code
                  ,invoice_code
                  ,invoice_kbn
                  ,history_seq
                  ,reminded_kbn
                  ,company_name
                  ,department
                  ,customer_name
                  ,customer_zip
                  ,customer_address1
                  ,customer_address2
                  ,customer_address3
                  ,shop_zip
                  ,shop_address1
                  ,shop_address2
                  ,shop_address3
                  ,shop_tel
                  ,shop_fax
                  ,billed_amount
                  ,tax
                  ,time_of_receipts
                  ,invoice_start_date
                  ,invoice_title
                  ,message1
                  ,message2
                  ,message3
                  ,message4
                  ,invoice_shopsite_name
                  ,shop_email
                  ,name
                  ,qa_url
                  ,shop_order_date
                  ,shop_code
                  ,transaction_id
                  ,shop_transaction_id1
                  ,shop_transaction_id2
                  ,shop_message1
                  ,shop_message2
                  ,shop_message3
                  ,shop_message4
                  ,shop_message5
                  ,yobi1
                  ,yobi2
                  ,yobi3
                  ,yobi4
                  ,yobi5
                  ,yobi6
                  ,yobi7
                  ,date_created
                )
        VALUES  (
                  @order_id
                  ,@invoice_bar_code
                  ,@invoice_code
                  ,@invoice_kbn
                  ,@history_seq
                  ,@reminded_kbn
                  ,@company_name
                  ,@department
                  ,@customer_name
                  ,@customer_zip
                  ,@customer_address1
                  ,@customer_address2
                  ,@customer_address3
                  ,@shop_zip
                  ,@shop_address1
                  ,@shop_address2
                  ,@shop_address3
                  ,@shop_tel
                  ,@shop_fax
                  ,@billed_amount
                  ,@tax
                  ,@time_of_receipts
                  ,@invoice_start_date
                  ,@invoice_title
                  ,@message1
                  ,@message2
                  ,@message3
                  ,@message4
                  ,@invoice_shopsite_name
                  ,@shop_email
                  ,@name
                  ,@qa_url
                  ,@shop_order_date
                  ,@shop_code
                  ,@transaction_id
                  ,@shop_transaction_id1
                  ,@shop_transaction_id2
                  ,@shop_message1
                  ,@shop_message2
                  ,@shop_message3
                  ,@shop_message4
                  ,@shop_message5
                  ,@yobi1
                  ,@yobi2
                  ,@yobi3
                  ,@yobi4
                  ,@yobi5
                  ,@yobi6
                  ,@yobi7
                  ,GETDATE()
                )
      ]]>
    </Statement>
    <Parameter>
      <Input Name="order_id" Type="nvarchar" Size="30" />
      <Input Name="invoice_bar_code" Type="nvarchar" Size="44" />
      <Input Name="invoice_code" Type="nvarchar" Size="16" />
      <Input Name="invoice_kbn" Type="nvarchar" Size="1" />
      <Input Name="history_seq" Type="nvarchar" Size="1" />
      <Input Name="reminded_kbn" Type="nvarchar" Size="2" />
      <Input Name="company_name" Type="nvarchar" Size="35" />
      <Input Name="department" Type="nvarchar" Size="35" />
      <Input Name="customer_name" Type="nvarchar" Size="25" />
      <Input Name="customer_zip" Type="nvarchar" Size="7" />
      <Input Name="customer_address1" Type="nvarchar" Size="4" />
      <Input Name="customer_address2" Type="nvarchar" Size="31" />
      <Input Name="customer_address3" Type="nvarchar" Size="35" />
      <Input Name="shop_zip" Type="nvarchar" Size="7" />
      <Input Name="shop_address1" Type="nvarchar" Size="4" />
      <Input Name="shop_address2" Type="nvarchar" Size="31" />
      <Input Name="shop_address3" Type="nvarchar" Size="35" />
      <Input Name="shop_tel" Type="nvarchar" Size="17" />
      <Input Name="shop_fax" Type="nvarchar" Size="17" />
      <Input Name="billed_amount" Type="nvarchar" Size="6" />
      <Input Name="tax" Type="nvarchar" Size="6" />
      <Input Name="time_of_receipts" Type="nvarchar" Size="11" />
      <Input Name="invoice_start_date" Type="nvarchar" Size="11" />
      <Input Name="invoice_title" Type="nvarchar" Size="3" />
      <Input Name="message1" Type="nvarchar" Size="30" />
      <Input Name="message2" Type="nvarchar" Size="30" />
      <Input Name="message3" Type="nvarchar" Size="30" />
      <Input Name="message4" Type="nvarchar" Size="30" />
      <Input Name="invoice_shopsite_name" Type="nvarchar" Size="75" />
      <Input Name="shop_email" Type="nvarchar" Size="100" />
      <Input Name="name" Type="nvarchar" Size="50" />
      <Input Name="qa_url" Type="nvarchar" Size="50" />
      <Input Name="shop_order_date" Type="nvarchar" Size="11" />
      <Input Name="shop_code" Type="nvarchar" Size="9" />
      <Input Name="transaction_id" Type="nvarchar" Size="11" />
      <Input Name="shop_transaction_id1" Type="nvarchar" Size="20" />
      <Input Name="shop_transaction_id2" Type="nvarchar" Size="20" />
      <Input Name="shop_message1" Type="nvarchar" Size="60" />
      <Input Name="shop_message2" Type="nvarchar" Size="60" />
      <Input Name="shop_message3" Type="nvarchar" Size="60" />
      <Input Name="shop_message4" Type="nvarchar" Size="60" />
      <Input Name="shop_message5" Type="nvarchar" Size="60" />
      <Input Name="yobi1" Type="nvarchar" Size="100" />
      <Input Name="yobi2" Type="nvarchar" Size="100" />
      <Input Name="yobi3" Type="nvarchar" Size="100" />
      <Input Name="yobi4" Type="nvarchar" Size="100" />
      <Input Name="yobi5" Type="nvarchar" Size="100" />
      <Input Name="yobi6" Type="nvarchar" Size="100" />
      <Input Name="yobi7" Type="nvarchar" Size="100" />
    </Parameter>
  </Insert>

  <!-- 請求書明細登録 -->
  <InsertDetail>
    <Statement>
      <![CDATA[
        INSERT  w2_InvoiceDskDeferredDetail
                (
                  order_id
                  ,detail_no
                  ,goods_name
                  ,goods_price
                  ,goods_num
                  ,date_created
                )
        VALUES  (
                  @order_id
                  ,@detail_no
                  ,@goods_name
                  ,@goods_price
                  ,@goods_num
                  ,GETDATE()
                )
      ]]>
    </Statement>
    <Parameter>
      <Input Name="order_id" Type="nvarchar" Size="30" />
      <Input Name="detail_no" Type="int" />
      <Input Name="goods_name" Type="nvarchar" Size="150" />
      <Input Name="goods_price" Type="nvarchar" Size="6" />
      <Input Name="goods_num" Type="nvarchar" Size="4" />
    </Parameter>
  </InsertDetail>

  <!-- 削除 -->
  <Delete>
    <Statement>
      <![CDATA[
        DELETE  w2_InvoiceDskDeferred
         WHERE  order_id = @order_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="order_id" Type="nvarchar" Size="30" />
    </Parameter>
  </Delete>

  <!-- 請求書明細削除 -->
  <DeleteDetail>
    <Statement>
      <![CDATA[
        DELETE  w2_InvoiceDskDeferredDetail
         WHERE  order_id = @order_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="order_id" Type="nvarchar" Size="30" />
    </Parameter>
  </DeleteDetail>

</InvoiceDskDeferred>
