<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : 商品在庫文言マスタ系SQLステートメントXML (ProductStockMessage.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2018 All Rights Reserved.
=========================================================================================================
-->
<ProductStockMessage>

  <!-- グローバル設定登録 -->
  <InsertGlobalSetting>
    <Statement>
      <![CDATA[
        INSERT  w2_ProductStockMessageGlobal
                (
                  shop_id
                  ,stock_message_id
                  ,language_code
                  ,language_locale_id
                  ,stock_message_name
                  ,stock_message_def
                  ,stock_message1
                  ,stock_message2
                  ,stock_message3
                  ,stock_message4
                  ,stock_message5
                  ,stock_message6
                  ,stock_message7
                  ,date_created
                  ,date_changed
                  ,last_changed
                )
        VALUES  (
                  @shop_id
                  ,@stock_message_id
                  ,@language_code
                  ,@language_locale_id
                  ,@stock_message_name
                  ,@stock_message_def
                  ,@stock_message1
                  ,@stock_message2
                  ,@stock_message3
                  ,@stock_message4
                  ,@stock_message5
                  ,@stock_message6
                  ,@stock_message7
                  ,GETDATE()
                  ,GETDATE()
                  ,@last_changed
                )
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="stock_message_id" Type="nvarchar" Size="30" />
      <Input Name="language_code" Type="nvarchar" Size="4" />
      <Input Name="language_locale_id" Type="nvarchar" Size="7" />
      <Input Name="stock_message_name" Type="nvarchar" Size="30" />
      <Input Name="stock_message_def" Type="nvarchar" Size="30" />
      <Input Name="stock_message1" Type="nvarchar" Size="30" />
      <Input Name="stock_message2" Type="nvarchar" Size="30" />
      <Input Name="stock_message3" Type="nvarchar" Size="30" />
      <Input Name="stock_message4" Type="nvarchar" Size="30" />
      <Input Name="stock_message5" Type="nvarchar" Size="30" />
      <Input Name="stock_message6" Type="nvarchar" Size="30" />
      <Input Name="stock_message7" Type="nvarchar" Size="30" />
      <Input Name="last_changed" Type="nvarchar" Size="20" />
    </Parameter>
  </InsertGlobalSetting>

  <!-- グローバル設定更新 -->
  <UpdateGlobalSetting>
    <Statement>
      <![CDATA[
        UPDATE  w2_ProductStockMessageGlobal
           SET  stock_message_name = @stock_message_name
                ,stock_message_def = @stock_message_def
                ,stock_message1 = @stock_message1
                ,stock_message2 = @stock_message2
                ,stock_message3 = @stock_message3
                ,stock_message4 = @stock_message4
                ,stock_message5 = @stock_message5
                ,stock_message6 = @stock_message6
                ,stock_message7 = @stock_message7
                ,date_changed = GETDATE()
                ,last_changed = @last_changed
         WHERE  shop_id = @shop_id
           AND  stock_message_id = @stock_message_id
           AND  language_code = @language_code
           AND  language_locale_id = @language_locale_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="stock_message_id" Type="nvarchar" Size="30" />
      <Input Name="language_code" Type="nvarchar" Size="4" />
      <Input Name="language_locale_id" Type="nvarchar" Size="7" />
      <Input Name="stock_message_name" Type="nvarchar" Size="30" />
      <Input Name="stock_message_def" Type="nvarchar" Size="30" />
      <Input Name="stock_message1" Type="nvarchar" Size="30" />
      <Input Name="stock_message2" Type="nvarchar" Size="30" />
      <Input Name="stock_message3" Type="nvarchar" Size="30" />
      <Input Name="stock_message4" Type="nvarchar" Size="30" />
      <Input Name="stock_message5" Type="nvarchar" Size="30" />
      <Input Name="stock_message6" Type="nvarchar" Size="30" />
      <Input Name="stock_message7" Type="nvarchar" Size="30" />
      <Input Name="last_changed" Type="nvarchar" Size="20" />
    </Parameter>
  </UpdateGlobalSetting>

  <!-- グローバル設定削除 -->
  <DeleteGlobalSetting>
    <Statement>
      <![CDATA[
        DELETE  w2_ProductStockMessageGlobal
         WHERE  shop_id = @shop_id
           AND  stock_message_id = @stock_message_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="stock_message_id" Type="nvarchar" Size="30" />
    </Parameter>
  </DeleteGlobalSetting>

  <!-- 商品在庫文言翻訳情報取得 -->
  <GetProductStockMessageTranslationSetting>
    <Statement>
      <![CDATA[
          SELECT  w2_ProductStockMessageGlobal.shop_id,
                  w2_ProductStockMessageGlobal.stock_message_id,
                  w2_ProductStockMessageGlobal.language_code,
                  w2_ProductStockMessageGlobal.language_locale_id,
                  w2_ProductStockMessageGlobal.stock_message_def,
                  w2_ProductStockMessageGlobal.stock_message1,
                  w2_ProductStockMessageGlobal.stock_message2,
                  w2_ProductStockMessageGlobal.stock_message3,
                  w2_ProductStockMessageGlobal.stock_message4,
                  w2_ProductStockMessageGlobal.stock_message5,
                  w2_ProductStockMessageGlobal.stock_message6,
                  w2_ProductStockMessageGlobal.stock_message7,
                  w2_ProductStockMessageGlobal.date_created,
                  w2_ProductStockMessageGlobal.date_changed,
                  w2_ProductStockMessageGlobal.last_changed,
                  w2_ProductStockMessage.stock_message_name,
                  w2_ProductStockMessage.stock_datum1,
                  w2_ProductStockMessage.stock_datum2,
                  w2_ProductStockMessage.stock_datum3,
                  w2_ProductStockMessage.stock_datum4,
                  w2_ProductStockMessage.stock_datum5,
                  w2_ProductStockMessage.stock_datum6,
                  w2_ProductStockMessage.stock_datum7
            FROM  w2_ProductStockMessageGlobal
                  INNER JOIN w2_ProductStockMessage ON
                  (
                    w2_ProductStockMessage.shop_id = w2_ProductStockMessageGlobal.shop_id
                    AND
                    w2_ProductStockMessage.stock_message_id = w2_ProductStockMessageGlobal.stock_message_id
                  )
           WHERE  w2_ProductStockMessageGlobal.shop_id = @shop_id
             AND  w2_ProductStockMessageGlobal.stock_message_id = @stock_message_id
             AND  w2_ProductStockMessageGlobal.language_code = @language_code
             AND  w2_ProductStockMessageGlobal.language_locale_id = @language_locale_id
        ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="stock_message_id" Type="nvarchar" Size="30" />
      <Input Name="language_code" Type="nvarchar" Size="4" />
      <Input Name="language_locale_id" Type="nvarchar" Size="7" />
    </Parameter>
  </GetProductStockMessageTranslationSetting>

  <!-- 言語コードで商品在庫文言情報取得 -->
  <GetProductStockMessageByLanguageCode>
    <Statement>
      <![CDATA[
          SELECT  *
            FROM  w2_ProductStockMessage
           WHERE  shop_id = @shop_id
             AND  stock_message_id = @stock_message_id
             AND  language_code = @language_code
             AND  language_locale_id = @language_locale_id
        ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="stock_message_id" Type="nvarchar" Size="30" />
      <Input Name="language_code" Type="nvarchar" Size="4" />
      <Input Name="language_locale_id" Type="nvarchar" Size="7" />
    </Parameter>
  </GetProductStockMessageByLanguageCode>

  <!-- 在庫文言設定情報に設定されている言語コード情報を取得 -->
  <GetProductStockMessageLanguageCodeSettings>
    <Statement>
      <![CDATA[
        SELECT  shop_id,
                stock_message_id,
                language_code,
                language_locale_id
          FROM  w2_ProductStockMessage
         WHERE  w2_ProductStockMessage.shop_id = @shop_id
           AND  w2_ProductStockMessage.stock_message_id = @stock_message_id
                <@@hasval:language_code@@>
           AND  w2_ProductStockMessage.language_code = @language_code
                </@@hasval:language_code@@>
                <@@hasval:language_locale_id@@>
           AND  w2_ProductStockMessage.language_locale_id = @language_locale_id
                </@@hasval:language_locale_id@@>
        UNION ALL
        SELECT  shop_id,
                stock_message_id,
                language_code,
                language_locale_id
          FROM  w2_ProductStockMessageGlobal
         WHERE  w2_ProductStockMessageGlobal.shop_id = @shop_id
           AND  w2_ProductStockMessageGlobal.stock_message_id = @stock_message_id
                <@@hasval:language_code@@>
           AND  w2_ProductStockMessageGlobal.language_code = @language_code
                </@@hasval:language_code@@>
                <@@hasval:language_locale_id@@>
           AND  w2_ProductStockMessageGlobal.language_locale_id = @language_locale_id
                </@@hasval:language_locale_id@@>
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="stock_message_id" Type="nvarchar" Size="30" />
      <Input Name="language_code" Type="nvarchar" Size="4" />
      <Input Name="language_locale_id" Type="nvarchar" Size="7" />
    </Parameter>
  </GetProductStockMessageLanguageCodeSettings>

  <!-- Get product stock messages -->
  <GetProductStockMessages>
    <Statement>
      <![CDATA[
        SELECT  w2_ProductStockMessage.*
          FROM  w2_ProductStockMessage
         WHERE  w2_ProductStockMessage.shop_id = @shop_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
    </Parameter>
  </GetProductStockMessages>

  <!-- Get product stock message -->
  <Get>
    <Statement>
      <![CDATA[
        SELECT  w2_ProductStockMessage.*
          FROM  w2_ProductStockMessage
         WHERE  w2_ProductStockMessage.shop_id = @shop_id
           AND  w2_ProductStockMessage.stock_message_id = @stock_message_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="stock_message_id" Type="nvarchar" Size="30" />
    </Parameter>
  </Get>

</ProductStockMessage>
