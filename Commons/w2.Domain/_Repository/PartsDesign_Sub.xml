<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : パーツデザイン パーツ管理系SQLサブステートメントXML (PartsDesign_Sub.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2020 All Rights Reserved.
=========================================================================================================
-->
<PartsDesign_Sub>

  <!-- 検索用WHERE文 -->
  <PARTS_DESIGN_SEARCH_WHERE>
    <Statement>
      <![CDATA[
         WHERE  1=1
           <@@hasval:group_id@@>
           AND  w2_PartsDesign.group_id = @group_id
           </@@hasval:group_id@@>
           <@@hasval:parts_type_like_escaped@@>
           AND  (
                  w2_PartsDesign.parts_type IN (@@ parts_type @@)
                )
           </@@hasval:parts_type_like_escaped@@>
           <@@hasval:use_type_like_escaped@@>
           AND  (
                  w2_PartsDesign.use_type IN (@@ use_type @@)
                )
           </@@hasval:use_type_like_escaped@@>
           <@@hasval:keyword_like_escaped@@>
           AND  (
                  w2_PartsDesign.management_title like  '%' + @keyword_like_escaped + '%' ESCAPE '#'
                  OR
                  w2_PartsDesign.file_name like  '%' + @keyword_like_escaped + '%' ESCAPE '#'
                )
           </@@hasval:keyword_like_escaped@@>
      ]]>
    </Statement>
    <Parameter>
      <Input Name="keyword_like_escaped" Type="nvarchar" Size="100" />
      <Input Name="group_id" Type="bigint" />
    </Parameter>
  </PARTS_DESIGN_SEARCH_WHERE>

  <!-- 検索用ORDER BY -->
  <PARTS_DESIGN_SEARCH_ORDER_BY>
    <Statement>
      <![CDATA[
        ORDER BY
          w2_PartsDesign.parts_sort_number ASC
      ]]>
    </Statement>
    <Parameter>
    </Parameter>
  </PARTS_DESIGN_SEARCH_ORDER_BY>

</PartsDesign_Sub>
