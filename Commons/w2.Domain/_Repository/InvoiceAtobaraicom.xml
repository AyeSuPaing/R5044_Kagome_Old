<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : 後払い.com請求書系SQLステートメントXML (InvoiceAtobaraicom.xml)
  ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2022 All Rights Reserved.
=========================================================================================================
-->
<InvoiceAtobaraicom>

  <!-- Insert update order invoice -->
  <InsertUpdateInvoiceAtobaraicom>
    <Statement>
      <![CDATA[
        DECLARE @counts int
        SELECT  @counts = COUNT(w2_InvoiceAtobaraicom.order_id)
          FROM  w2_InvoiceAtobaraicom
         WHERE  order_id = @order_id

        IF @counts = 0
        BEGIN
          INSERT  w2_InvoiceAtobaraicom
                  (
                    order_id,
                    use_amount,
                    tax_amount,
                    limit_date,
                    name_kj,
                    cv_barcode_data,
                    cv_barcode_string1,
                    cv_barcode_string2,
                    yu_mt_ocr_code1,
                    yu_mt_ocr_code2,
                    yu_account_name,
                    yu_account_no,
                    yu_load_kind,
                    cvs_company_name,
                    cvs_user_name,
                    bk_code,
                    bk_branch_code,
                    bk_name,
                    bk_branch_name,
                    bk_account_kind,
                    bk_account_no,
                    bk_account_name,
                    bk_account_kana,
                    mypage_pwd,
                    mypage_url,
                    credit_deadline,
                    date_created
                  )
          VALUES  (
                    @order_id,
                    @use_amount,
                    @tax_amount,
                    @limit_date,
                    @name_kj,
                    @cv_barcode_data,
                    @cv_barcode_string1,
                    @cv_barcode_string2,
                    @yu_mt_ocr_code1,
                    @yu_mt_ocr_code2,
                    @yu_account_name,
                    @yu_account_no,
                    @yu_load_kind,
                    @cvs_company_name,
                    @cvs_user_name,
                    @bk_code,
                    @bk_branch_code,
                    @bk_name,
                    @bk_branch_name,
                    @bk_account_kind,
                    @bk_account_no,
                    @bk_account_name,
                    @bk_account_kana,
                    @mypage_pwd,
                    @mypage_url,
                    @credit_deadline,
                    GETDATE()
                  )
        END
        ELSE
        BEGIN
          UPDATE  w2_InvoiceAtobaraicom
             SET  use_amount = @use_amount,
                  tax_amount = @tax_amount,
                  limit_date = @limit_date,
                  name_kj = @name_kj,
                  cv_barcode_data = @cv_barcode_data,
                  cv_barcode_string1 = @cv_barcode_string1,
                  cv_barcode_string2 = @cv_barcode_string2,
                  yu_mt_ocr_code1 = @yu_mt_ocr_code1,
                  yu_mt_ocr_code2 = @yu_mt_ocr_code2,
                  yu_account_name = @yu_account_name,
                  yu_account_no = @yu_account_no,
                  yu_load_kind = @yu_load_kind,
                  cvs_company_name = @cvs_company_name,
                  cvs_user_name = @cvs_user_name,
                  bk_code = @bk_code,
                  bk_branch_code = @bk_branch_code,
                  bk_name = @bk_name,
                  bk_branch_name = @bk_branch_name,
                  bk_account_kind = @bk_account_kind,
                  bk_account_no = @bk_account_no,
                  bk_account_name = @bk_account_name,
                  bk_account_kana = @bk_account_kana,
                  mypage_pwd = @mypage_pwd,
                  mypage_url = @mypage_url,
                  credit_deadline = @credit_deadline
           WHERE  order_id = @order_id
        END
      ]]>
    </Statement>
    <Parameter>
      <Input Name="order_id" Type="nvarchar" Size="30" />
      <Input Name="use_amount" Type="nvarchar" Size="8" />
      <Input Name="tax_amount" Type="nvarchar" Size="8" />
      <Input Name="limit_date" Type="nvarchar" Size="10" />
      <Input Name="name_kj" Type="nvarchar" Size="40" />
      <Input Name="cv_barcode_data" Type="nvarchar" Size="50" />
      <Input Name="cv_barcode_string1" Type="nvarchar" Size="50" />
      <Input Name="cv_barcode_string2" Type="nvarchar" Size="50" />
      <Input Name="yu_mt_ocr_code1" Type="nvarchar" Size="50" />
      <Input Name="yu_mt_ocr_code2" Type="nvarchar" Size="50" />
      <Input Name="yu_account_name" Type="nvarchar" Size="20" />
      <Input Name="yu_account_no" Type="nvarchar" Size="20" />
      <Input Name="yu_load_kind" Type="nvarchar" Size="1" />
      <Input Name="cvs_company_name" Type="nvarchar" Size="20" />
      <Input Name="cvs_user_name" Type="nvarchar" Size="20" />
      <Input Name="bk_code" Type="nvarchar" Size="5" />
      <Input Name="bk_branch_code" Type="nvarchar" Size="3" />
      <Input Name="bk_name" Type="nvarchar" Size="20" />
      <Input Name="bk_branch_name" Type="nvarchar" Size="20" />
      <Input Name="bk_account_kind" Type="nvarchar" Size="1" />
      <Input Name="bk_account_no" Type="nvarchar" Size="10" />
      <Input Name="bk_account_name" Type="nvarchar" Size="20" />
      <Input Name="bk_account_kana" Type="nvarchar" Size="20" />
      <Input Name="mypage_pwd" Type="nvarchar" Size="10" />
      <Input Name="mypage_url" Type="nvarchar" Size="100" />
      <Input Name="credit_deadline" Type="nvarchar" Size="10" />
    </Parameter>
  </InsertUpdateInvoiceAtobaraicom>

</InvoiceAtobaraicom>
