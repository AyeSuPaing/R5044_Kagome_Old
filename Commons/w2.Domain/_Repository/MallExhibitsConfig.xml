<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : モール出品設定系SQLステートメントXML(MallExhibitsConfig.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2021 All Rights Reserved.
=========================================================================================================
-->
<MallExhibitsConfig>

  <!-- モール出品設定情報取得（CSV全件出力用） -->
  <GetMallExhibitsConfigMaster>
    <Statement>
      <![CDATA[
        SELECT  @@ fields @@
          FROM  w2_Product
                INNER JOIN w2_MallExhibitsConfig ON
                (
                  w2_Product.shop_id = w2_MallExhibitsConfig.shop_id
                  AND
                  w2_Product.product_id = w2_MallExhibitsConfig.product_id
                )
         -- 全件出力のため、条件は有効フラグのみとする
         WHERE  w2_Product.valid_flg = '1'  -- 有効
                [[ MALLEXHIBITSCONFIG_SEARCH_ORDER_BY ]]
        ]]>
    </Statement>
    <Parameter>
      <Input Name="srch_key" Type="int" />
      <Input Name="srch_word" Type="nvarchar" Size="4000" />
      <Input Name="sort_kbn" Type="int"></Input>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="bgn_row_num" Type="int" />
      <Input Name="end_row_num" Type="int" />
    </Parameter>
  </GetMallExhibitsConfigMaster>

  <!-- Is exist -->
  <IsExist>
    <Statement>
      <![CDATA[
        SELECT  COUNT(w2_MallExhibitsConfig.product_id)
          FROM  w2_MallExhibitsConfig
         WHERE  w2_MallExhibitsConfig.shop_id = @shop_id
           AND  w2_MallExhibitsConfig.product_id = @product_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="product_id" Type="nvarchar" Size="30" />
    </Parameter>
  </IsExist>

  <!-- Insert -->
  <Insert>
    <Statement>
      <![CDATA[
        INSERT  w2_MallExhibitsConfig
                (
                  shop_id,
                  product_id,
                  exhibits_flg1,
                  exhibits_flg2,
                  exhibits_flg3,
                  exhibits_flg4,
                  exhibits_flg5,
                  exhibits_flg6,
                  exhibits_flg7,
                  exhibits_flg8,
                  exhibits_flg9,
                  exhibits_flg10,
                  exhibits_flg11,
                  exhibits_flg12,
                  exhibits_flg13,
                  exhibits_flg14,
                  exhibits_flg15,
                  exhibits_flg16,
                  exhibits_flg17,
                  exhibits_flg18,
                  exhibits_flg19,
                  exhibits_flg20,
                  date_created,
                  date_changed,
                  last_changed
                )
        VALUES  (
                  @shop_id,
                  @product_id,
                  @exhibits_flg1,
                  @exhibits_flg2,
                  @exhibits_flg3,
                  @exhibits_flg4,
                  @exhibits_flg5,
                  @exhibits_flg6,
                  @exhibits_flg7,
                  @exhibits_flg8,
                  @exhibits_flg9,
                  @exhibits_flg10,
                  @exhibits_flg11,
                  @exhibits_flg12,
                  @exhibits_flg13,
                  @exhibits_flg14,
                  @exhibits_flg15,
                  @exhibits_flg16,
                  @exhibits_flg17,
                  @exhibits_flg18,
                  @exhibits_flg19,
                  @exhibits_flg20,
                  GETDATE(),
                  GETDATE(),
                  @last_changed
                )
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="product_id" Type="nvarchar" Size="30" />
      <Input Name="exhibits_flg1" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg2" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg3" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg4" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg5" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg6" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg7" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg8" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg9" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg10" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg11" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg12" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg13" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg14" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg15" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg16" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg17" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg18" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg19" Type="nvarchar" Size="10" />
      <Input Name="exhibits_flg20" Type="nvarchar" Size="10" />
      <Input Name="date_created" Type="datetime" />
      <Input Name="date_changed" Type="datetime" />
      <Input Name="last_changed" Type="nvarchar" Size="20" />
    </Parameter>
  </Insert>

  <!-- Delete -->
  <Delete>
    <Statement>
      <![CDATA[
        DELETE  w2_MallExhibitsConfig
         WHERE  w2_MallExhibitsConfig.shop_id = @shop_id
           AND  w2_MallExhibitsConfig.product_id = @product_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="shop_id" Type="nvarchar" Size="10" />
      <Input Name="product_id" Type="nvarchar" Size="30" />
    </Parameter>
  </Delete>

</MallExhibitsConfig>