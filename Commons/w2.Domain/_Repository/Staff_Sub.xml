<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : スタッフ系SQLサブステートメントXML (Staff_Sub.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright W2 Co.,Ltd. 2019 All Rights Reserved.
=========================================================================================================
-->
<Staff_Sub>

  <!-- 検索用WHERE文 -->
  <STAFF_SEARCH_WHERE>
    <Statement>
      <![CDATA[
        WHERE  1=1
          <@@hasval:staff_id_like_escaped@@>
          AND  w2_Staff.staff_id LIKE '%' + @staff_id_like_escaped + '%' ESCAPE '#'
          </@@hasval:staff_id_like_escaped@@>
          <@@hasval:staff_name_like_escaped@@>
          AND  w2_Staff.staff_name LIKE '%' + @staff_name_like_escaped + '%' ESCAPE '#'
          </@@hasval:staff_name_like_escaped@@>
          <@@hasval:height_lower_limit@@>
          AND  @height_lower_limit <= w2_Staff.staff_height
          </@@hasval:height_lower_limit@@>
          <@@hasval:height_upper_limit@@>
          AND  w2_Staff.staff_height <= @height_upper_limit
          </@@hasval:height_upper_limit@@>
          <@@hasval:valid_flg@@>
          AND  w2_Staff.valid_flg = @valid_flg
          </@@hasval:valid_flg@@>
      ]]>
    </Statement>
    <Parameter>
      <Input Name="staff_id_like_escaped" Type="nvarchar" Size="30" />
      <Input Name="staff_name_like_escaped" Type="nvarchar" Size="30" />
      <Input Name="valid_flg" Type="nvarchar" Size="1" />
      <Input Name="height_lower_limit" Type="int" />
      <Input Name="height_upper_limit" Type="int" />
    </Parameter>
  </STAFF_SEARCH_WHERE>

  <!-- スタッフ情報マスタ出力用WHERE文 -->
  <STAFF_MASTER_SEARCH_WHERE>
    <Statement>
      <![CDATA[
        WHERE  1=1
          <@@hasval:staff_id_like_escaped@@>
          AND  w2_Staff.staff_id LIKE '%' + @staff_id_like_escaped + '%' ESCAPE '#'
          </@@hasval:staff_id_like_escaped@@>
          <@@hasval:staff_name_like_escaped@@>
          AND  w2_Staff.staff_name LIKE '%' + @staff_name_like_escaped + '%' ESCAPE '#'
          </@@hasval:staff_name_like_escaped@@>
          <@@hasval:height_lower_limit@@>
          AND  @height_lower_limit <= w2_Staff.staff_height
          </@@hasval:height_lower_limit@@>
          <@@hasval:height_upper_limit@@>
          AND  w2_Staff.staff_height <= @height_upper_limit
          </@@hasval:height_upper_limit@@>
      ]]>
    </Statement>
    <Parameter>
      <Input Name="staff_id_like_escaped" Type="nvarchar" Size="30" />
      <Input Name="staff_name_like_escaped" Type="nvarchar" Size="30" />
      <Input Name="height_lower_limit" Type="int" />
      <Input Name="height_upper_limit" Type="int" />
    </Parameter>
  </STAFF_MASTER_SEARCH_WHERE>

  <!-- 検索用ORDER BY -->
  <STAFF_SEARCH_ORDER_BY>
    <Statement>
      <![CDATA[
        ORDER BY
          w2_Staff.date_created DESC,
          -- 常に一定の結果セットを得るため、主キー（昇順）ソート
          w2_Staff.staff_id ASC
      ]]>
    </Statement>
    <Parameter>
    </Parameter>
  </STAFF_SEARCH_ORDER_BY>

</Staff_Sub>
