<?xml version="1.0" encoding="utf-8" ?>
<!--
=========================================================================================================
  Module      : メッセージメール系SQLステートメントXML(CsMessageMail.xml)
 ･･･････････････････････････････････････････････････････････････････････････････････････････････････････
  Copyright   : Copyright w2solution Co.,Ltd. 2013 All Rights Reserved.
=========================================================================================================
-->
<CsMessageMail>
  
  <!-- 取得 -->
  <Get>
    <Statement>
      <![CDATA[
        SELECT  *
          FROM  w2_CsMessageMail
         WHERE  w2_CsMessageMail.dept_id = @dept_id
           AND  w2_CsMessageMail.mail_id = @mail_id
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="mail_id" Type="nvarchar" Size="10" />
    </Parameter>
  </Get>

  <!-- 登録 -->
  <Register>
    <Statement>
      <![CDATA[
        INSERT w2_CsMessageMail
            (
               dept_id,
               mail_id,
               mail_kbn,
               mail_from,
               mail_to,
               mail_cc,
               mail_subject,
               mail_body,
               receive_datetime,
               message_id,
               in_reply_to,
               date_created,
               date_changed,
               last_changed
            )
            VALUES
            (
              @dept_id,
              @mail_id,
              @mail_kbn,
              @mail_from,
              @mail_to,
              @mail_cc,
              @mail_subject,
              @mail_body,
              @receive_datetime,
              @message_id,
              @in_reply_to,
              GETDATE(),
              GETDATE(),
              @last_changed
            )
      ]]>
    </Statement>
    <Parameter>
      <Input Name="dept_id" Type="nvarchar" Size="30" />
      <Input Name="mail_id" Type="nvarchar" Size="30" />
      <Input Name="mail_kbn" Type="nvarchar" Size="10" />
      <Input Name="mail_from" Type="nvarchar" Size="512" />
      <Input Name="mail_to" Type="nvarchar" Size="max" />
      <Input Name="mail_cc" Type="nvarchar" Size="max" />
      <Input Name="mail_subject" Type="nvarchar" Size="100" />
      <Input Name="mail_body" Type="nvarchar" Size="max" />
      <Input Name="receive_datetime" Type="datetime" />
      <Input Name="message_id" Type="varchar" Size="900" />
      <Input Name="in_reply_to" Type="varchar" Size="900" />
      <Input Name="last_changed" Type="nvarchar" Size="20" />
    </Parameter>
  </Register>

</CsMessageMail>
